import{r as R,Z as S,j as e,g as F,s as k,h as z,e as Y,f as r,U as o,V as p,ao as x,o as s,aB as M}from"./index-DAwD_DDx.js";import{R as w}from"./ReportForm-C3lYwj_n.js";import{D as y}from"./DatePickerField-BF_HZaNO.js";const A={Ç:"C",ç:"c",Ğ:"G",ğ:"g",İ:"I",ı:"i",Ö:"O",ö:"o",Ş:"S",ş:"s",Ü:"U",ü:"u"},a=t=>t&&t.replace(/[ÇçĞğİıÖöŞşÜü]/g,i=>A[i]||i),W=t=>{try{t.setFont("times","normal"),console.log("Times fontu kullanılıyor (Türkçe karakter desteği ile)")}catch(i){console.error("Font ayarlama hatası:",i),t.setFont("helvetica","normal")}},K=()=>{const[t,i]=R.useState({searchType:"",dateRangeStart:S(),dateRangeEnd:S(),documentStatus:[],reportType:"",documentType:"",columns:[],documentNumber:"",class1:"",class2:"",customerType:"",customer:"",productService:"",category:"",brand:"",warehouse:""}),l=n=>{const{name:c,value:m,type:j,checked:h}=n.target;i(j==="checkbox"?d=>({...d,[c]:h?[...d[c],m]:d[c].filter(g=>g!==m)}):d=>({...d,[c]:m}))},b=(n,c)=>{i(m=>({...m,[n]:c}))},f=()=>{const n=new M;W(n),n.setFontSize(18);const c=a("İadeler Raporu");n.text(c,105,15,{align:"center"});const m=S().hour(15).minute(27).format("DD/MM/YYYY HH:mm:ss");n.setFontSize(10),n.text(a(`Oluşturulma Tarihi: ${m}`),105,25,{align:"center"}),n.setFontSize(14),n.text(a("Rapor Kriterleri"),14,35);const j=[[a("Arama"),a(t.searchType||"Seçiniz")],[a("Başlangıç Tarihi"),t.dateRangeStart.format("DD/MM/YYYY")],[a("Bitiş Tarihi"),t.dateRangeEnd.format("DD/MM/YYYY")],[a("Belge Durumu"),t.documentStatus.length?a(t.documentStatus.join(", ")):a("Hepsini Seç")],[a("Rapor Türü"),a(t.reportType||"Belirtilmedi")],[a("Belge Tipi"),a(t.documentType||"Seçiniz")],[a("Kolonlar"),t.columns.length?a(t.columns.join(", ")):a("Belirtilmedi")],[a("Belge Numarası"),a(t.documentNumber||"Belirtilmedi")],[a("Sınıf 1"),a(t.class1||"Belirtilmedi")],[a("Sınıf 2"),a(t.class2||"Belirtilmedi")],[a("Müşteri Tipi"),a(t.customerType||"Seçiniz")],[a("Müşteri"),a(t.customer||"Belirtilmedi")],[a("Ürün/Hizmet"),a(t.productService||"Belirtilmedi")],[a("Kategori"),a(t.category||"Belirtilmedi")],[a("Marka"),a(t.brand||"Belirtilmedi")],[a("Depo"),a(t.warehouse||"Seçiniz")]];n.autoTable({startY:40,head:[[a("Kriter"),a("Değer")]],body:j,theme:"grid",headStyles:{fillColor:[41,101,168],fontStyle:"bold",textColor:[255,255,255]},styles:{font:"times",fontStyle:"normal",cellPadding:3,fontSize:10,overflow:"linebreak"},columnStyles:{0:{cellWidth:50,fontStyle:"bold"},1:{cellWidth:100}}});const h=[{id:1,documentNo:"IAD-2023-001",date:"01/01/2023",customer:a("Müşteri A Şişli"),amount:"1.200,00 ₺"},{id:2,documentNo:"IAD-2023-002",date:"02/01/2023",customer:a("Müşteri B Çankaya"),amount:"2.300,50 ₺"},{id:3,documentNo:"IAD-2023-003",date:"03/01/2023",customer:a("Müşteri C Üsküdar"),amount:"500,75 ₺"}];n.setFontSize(14),n.text(a("İade Verileri"),14,n.autoTable.previous.finalY+15),n.autoTable({startY:n.autoTable.previous.finalY+20,head:[[a("ID"),a("Belge No"),a("Tarih"),a("Müşteri"),a("Tutar")]],body:h.map(u=>[u.id,u.documentNo,u.date,u.customer,u.amount]),theme:"grid",headStyles:{fillColor:[41,101,168],fontStyle:"bold",textColor:[255,255,255]},styles:{font:"times",fontStyle:"normal",cellPadding:3,fontSize:10,overflow:"linebreak"},columnStyles:{0:{cellWidth:15},1:{cellWidth:40},2:{cellWidth:30},3:{cellWidth:60},4:{cellWidth:30}}}),n.setFontSize(14),n.text(a("Özet"),14,n.autoTable.previous.finalY+15);const d=h.reduce((u,N)=>u+parseFloat(N.amount.replace(/[.,\s₺]/g,"")),0),g=d/h.length,C=h.length,T=[[a("Toplam İade"),`${d.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,".")},00 ₺`],[a("Ortalama İade"),`${g.toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,".")},00 ₺`],[a("Belge Sayısı"),`${C} adet`]];n.autoTable({startY:n.autoTable.previous.finalY+20,body:T,theme:"grid",headStyles:{fillColor:[41,101,168],fontStyle:"bold",textColor:[255,255,255]},styles:{font:"times",fontStyle:"normal",cellPadding:3,fontSize:10,overflow:"linebreak"},columnStyles:{0:{cellWidth:50,fontStyle:"bold"},1:{cellWidth:50}}});const D=n.output("blob"),B=URL.createObjectURL(D);window.open(B,"_blank")},v=n=>{n&&typeof n.preventDefault=="function"&&n.preventDefault(),f()};return e.jsxs(F,{children:[e.jsx(k,{style:{backgroundColor:"#2965A8",color:"#fff"},children:"İadeler"}),e.jsx(z,{children:e.jsx(w,{onSubmit:v,children:e.jsxs(Y,{children:[e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Arama"}),e.jsxs(p,{name:"searchType",value:t.searchType,onChange:l,className:"mb-3",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"document",children:"Belge Tarihine Göre"}),e.jsx("option",{value:"return",children:"İade Tarihine Göre"})]})]}),e.jsxs(r,{md:6,className:"d-flex gap-2 justify-content-center align-items-center",children:[e.jsx(y,{label:"Başlangıç Tarihi",value:t.dateRangeStart,onChange:n=>b("dateRangeStart",n)}),e.jsx(y,{label:"Bitiş Tarihi",value:t.dateRangeEnd,onChange:n=>b("dateRangeEnd",n)})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Belge Durumu"}),e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{label:"Hepsini Seç",name:"documentStatus",value:"all",onChange:l}),e.jsx(x,{label:"İade Faturaları",name:"documentStatus",value:"returnInvoices",onChange:l}),e.jsx(x,{label:"Açık İadeler",name:"documentStatus",value:"openReturns",onChange:l}),e.jsx(x,{label:"Tamamlanmış İadeler",name:"documentStatus",value:"completedReturns",onChange:l})]})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Rapor Türü"}),e.jsx(s,{name:"reportType",value:t.reportType,onChange:l,className:"mb-3"})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Belge Tipi"}),e.jsxs(p,{name:"documentType",value:t.documentType,onChange:l,className:"mb-3",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"returnInvoice",children:"İade Faturası"}),e.jsx("option",{value:"returnDelivery",children:"İade İrsaliyesi"})]})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Kolonlar"}),e.jsx(s,{name:"columns",value:t.columns,onChange:l,className:"mb-3"})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Belge Numarası"}),e.jsx(s,{name:"documentNumber",value:t.documentNumber,onChange:l,className:"mb-3"})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Sınıf 1"}),e.jsx(s,{name:"class1",value:t.class1,onChange:l,className:"mb-3"})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Sınıf 2"}),e.jsx(s,{name:"class2",value:t.class2,onChange:l,className:"mb-3"})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Müşteri Tipi"}),e.jsxs(p,{name:"customerType",value:t.customerType,onChange:l,className:"mb-3",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"individual",children:"Bireysel"}),e.jsx("option",{value:"corporate",children:"Kurumsal"})]})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Müşteri"}),e.jsx(s,{name:"customer",value:t.customer,onChange:l,className:"mb-3"})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Ürün / Hizmet"}),e.jsx(s,{name:"productService",value:t.productService,onChange:l,className:"mb-3"})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Kategori"}),e.jsx(s,{name:"category",value:t.category,onChange:l,className:"mb-3"})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Marka"}),e.jsx(s,{name:"brand",value:t.brand,onChange:l,className:"mb-3"})]}),e.jsxs(r,{md:6,children:[e.jsx(o,{children:"Depo"}),e.jsxs(p,{name:"warehouse",value:t.warehouse,onChange:l,className:"mb-3",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"warehouse1",children:"Depo 1"}),e.jsx("option",{value:"warehouse2",children:"Depo 2"})]})]})]})})})]})};export{K as default};
