import{ai as rs,J as is,u as ts,r as d,t as A,j as e,g as M,s as D,h as E,q as u,C as ls,e as B,f as m,B as re,D as ie,E as te,F as y,$ as le,a0 as ne,a1 as F,a2 as c,a3 as de,a4 as o,m as Y,a5 as be,a7 as oe,M as ns,N as I,Q as z,S as R,T as $,W as L,i as W,U as b,o as S,ao as ge,V as Ce,a as ds,b as os,c as cs}from"./index-DAwD_DDx.js";import{C as hs}from"./CustomerModal-D4Wbjyc2.js";const bs=()=>{const{id:x}=rs(),{state:X}=is(),Z=ts(),[h,ce]=d.useState((X==null?void 0:X.customer)||null),[he,ue]=d.useState([]),[us,ms]=d.useState([]),[xs,js]=d.useState([]),[Se,ks]=d.useState([]),[me,xe]=d.useState([]),[we,ee]=d.useState(!1),[N,ve]=d.useState(null),[se,Ae]=d.useState(""),[Ne,U]=d.useState(!1),[Fe,q]=d.useState(!1),[Te,Be]=d.useState(null),[Me,G]=d.useState(!1),[j,v]=d.useState({adi:"",adres:"",kodu:"",aktif:!0}),C="https://speedsofttest.com/api",[t,g]=d.useState({barkod:"",urunAdi:"",fiyat:"",birim:"adet",miktar:"",toplamFiyat:"",musteriId:x}),[H,K]=d.useState([]),[T,k]=d.useState(!1),[ys,je]=d.useState(null),[De,Ee]=d.useState([]),[Ye,ae]=d.useState(!1),[Ie,ke]=d.useState([]),[ze,V]=d.useState(!1),[Re,O]=d.useState(!1),[$e,Le]=d.useState(null);d.useEffect(()=>{console.log("Müşteri image:",h==null?void 0:h.image)},[h]);const n=(s,a="success")=>{const r=e.jsxs(ds,{autohide:!0,visible:!0,delay:5e3,children:[e.jsx(os,{closeButton:!0,children:e.jsx("strong",{className:"me-auto",children:a==="error"?"Hata":a==="warning"?"Uyarı":"Başarılı"})}),e.jsx(cs,{children:s})]},Date.now());Ee(i=>[...i,r])},_=async(s,a)=>{var r,i,l,f;try{const{data:w}=await A.get(s),fe=Array.isArray(w)?w.filter(as=>as.durumu===1):(w==null?void 0:w.durumu)===1?[w]:[];return a(fe),fe}catch(w){return console.error("Veri Yükleme Hatası:",{url:s,message:w.message,status:(r=w.response)==null?void 0:r.status,data:(i=w.response)==null?void 0:i.data}),n(((f=(l=w.response)==null?void 0:l.data)==null?void 0:f.message)||"Veriler yüklenemedi.","error"),null}},He=async s=>{let a="Bilinmiyor";try{if(s.musteriSiniflandirmaId){const r=Ie.find(i=>i.id===s.musteriSiniflandirmaId);if(r)a=r.adi;else{const i=await _(`${C}/musteriSiniflandirma/get-by-id/${s.musteriSiniflandirmaId}`,ke);a=i&&i.length>0?i[0].adi:"Bilinmiyor"}}}catch(r){console.error("Dönüşüm Hatası:",r),a="Bilinmiyor"}return{id:s.id,name:s.unvani||"Bilinmiyor",openBalance:s.acilisBakiye||0,chequeBalance:0,bondBalance:0,turnover:0,phone:s.telefon||"",phone2:s.telefon2||"",classification:a,email:s.email||"",address:s.adres||"",taxOffice:s.vergiDairesi||"",taxOrIdNumber:s.vergiNumarasi||"",accountingCode:s.kodu||"",note:s.aciklama||"",currency:s.paraBirimi||"TRY",riskLimit:s.riskLimiti||0,dueDate:s.vade||"",isTaxExempt:s.vergiMuaf||!1,bankInfo:s.bankaBilgileri||"",contactPerson:s.yetkiliKisi||"",otherContact:s.diger||"",image:s.fotograf||null}},P=d.useCallback(async()=>{var s,a,r,i;k(!0);try{await _(`${C}/musteriSiniflandirma/get-all`,ke);const{data:l}=await A.get(`${C}/musteri/musteri-get-by-id/${x}`);console.log("Müşteri API Yanıtı:",l);const f=Array.isArray(l)?l[0]:l;if(!f||f.durumu!==1)throw new Error("Müşteri bulunamadı veya aktif değil.");const w=await He(f);ce(w),je(null)}catch(l){console.error("Müşteri Yükleme Hatası:",{message:l.message,status:(s=l.response)==null?void 0:s.status,data:(a=l.response)==null?void 0:a.data}),je(((i=(r=l.response)==null?void 0:r.data)==null?void 0:i.message)||"Müşteri yüklenemedi."),n("Müşteri yüklenemedi.","error")}finally{k(!1)}},[x]),J=async()=>{try{const s=await _(`${C}/sube/sube-get-by-musteriId/${x}`,xe);s&&xe(s)}catch{n("Şube verileri yüklenemedi.","error")}},Q=async()=>{try{const s=await _(`${C}/musteriSatis/musteriSatis-get-by-musteri/${x}`,ue);s&&ue(s)}catch{n("Satış verileri yüklenemedi.","error")}};function Ke(s,a){let r;return function(...l){const f=()=>{clearTimeout(r),s(...l)};clearTimeout(r),r=setTimeout(f,a)}}const ye=async s=>{if(!(!s||s.length<3))try{const{data:a}=await A.get(`${C}/urun/urun-get-barcode?barkod=${s}`);if(a&&a.length>0){const r=a[0];g(i=>({...i,barkod:s,urunAdi:r.adi||"",fiyat:r.satisFiyat?r.satisFiyat.toString():"",birim:r.birimAdi||"adet",miktar:i.miktar,toplamFiyat:i.miktar?(parseFloat(i.miktar)*r.satisFiyat).toFixed(2):"",musteriId:x})),r.stokMiktari!==void 0&&r.stokMiktari<=0?n("Uyarı: Bu ürün stokta yok!","warning"):r.kritikStok&&r.stokMiktari<=r.kritikStok&&n(`Uyarı: Stok kritik seviyede (${r.stokMiktari} adet)`,"warning")}}catch(a){console.error("Barkod ile ürün getirme hatası:",a)}},Pe=d.useCallback(Ke(s=>{ye(s)},800),[]),Ue=async()=>{var s,a,r,i;if(!j.adi){n("Şube adı zorunludur.","error");return}if(!x||isNaN(parseInt(x))){n("Geçersiz müşteri ID'si.","error");return}k(!0);try{const l={adi:j.adi,adres:j.adres||"a",kodu:j.kodu||"b",aktif:j.aktif?1:0,musteriId:parseInt(x)};console.log("Şube Ekleme Payload:",l);const{data:f}=await A.post(`${C}/sube/sube-create`,l,{headers:{"Content-Type":"application/json"}});console.log("Şube Ekleme Yanıtı:",f),n(f.message||"Şube başarıyla eklendi.","success"),await J(),U(!1),v({adi:"",adres:"",kodu:"",aktif:!0})}catch(l){console.error("Şube Ekleme Hatası:",{message:l.message,status:(s=l.response)==null?void 0:s.status,data:(a=l.response)==null?void 0:a.data}),n(((i=(r=l.response)==null?void 0:r.data)==null?void 0:i.message)||"Şube eklenemedi.","error")}finally{k(!1)}},qe=s=>{Be(s),v({adi:s.adi,adres:s.adres,kodu:s.kodu,aktif:s.aktif===1}),q(!0)},Ge=async()=>{var s,a;if(!j.adi){n("Şube adı zorunludur.","error");return}k(!0);try{const r={id:Te.id,adi:j.adi,adres:j.adres||"",kodu:j.kodu||"",aktif:j.aktif?1:0,musteriId:parseInt(x)};await A.put(`${C}/sube/sube-update`,r,{headers:{"Content-Type":"application/json"}}),n("Şube güncellendi.","success"),q(!1),await J()}catch(r){n(((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.message)||"Şube güncellenemedi.","error")}finally{k(!1)}},Ve=async s=>{var a,r,i,l;k(!0);try{await A.delete(`${C}/sube/sube-delete/${s}`),n("Şube başarıyla silindi.","success"),await J()}catch(f){console.error("Şube Silme Hatası:",{message:f.message,status:(a=f.response)==null?void 0:a.status,data:(r=f.response)==null?void 0:r.data}),n(((l=(i=f.response)==null?void 0:i.data)==null?void 0:l.message)||"Şube silinemedi.","error")}finally{k(!1)}};d.useEffect(()=>{x&&(!h||h.id),P(),Q(),J()},[x,P]);const pe=(s,a)=>{ve(s),Ae(a),ee(!0)},p=s=>{s==="Satış Yap"?G(!0):n(`${s} işlemi başlatıldı.`,"success")},Oe=async()=>{var s,a,r,i;V(!1),k(!0);try{await A.delete(`${C}/musteri/musteri-delete/${h.id}`),n("Müşteri silindi.","success"),Z("/app/customers")}catch(l){console.error("Müşteri Silme Hatası:",{message:l.message,status:(s=l.response)==null?void 0:s.status,data:(a=l.response)==null?void 0:a.data}),n(((i=(r=l.response)==null?void 0:r.data)==null?void 0:i.message)||"Müşteri silinemedi.","error")}finally{k(!1)}},_e=async()=>{var s,a,r,i;k(!0);try{await A.put(`${C}/musteri/musteri-aktif/${h.id}`),n("Müşteri aktif edildi.","success"),P()}catch(l){console.error("Müşteri Aktif Etme Hatası:",{message:l.message,status:(s=l.response)==null?void 0:s.status,data:(a=l.response)==null?void 0:a.data}),n(((i=(r=l.response)==null?void 0:r.data)==null?void 0:i.message)||"Müşteri aktif edilemedi.","error")}finally{k(!1)}},Je=()=>{if(!t.barkod||!t.urunAdi||!t.fiyat||!t.miktar){n("Tüm alanlar doldurulmalıdır.","error");return}if(isNaN(t.fiyat)||isNaN(t.miktar)||parseFloat(t.fiyat)<=0||parseFloat(t.miktar)<=0){n("Fiyat ve miktar pozitif sayılar olmalıdır.","error");return}const s={id:Date.now(),barkod:t.barkod,urunAdi:t.urunAdi,fiyat:parseFloat(t.fiyat),birim:t.birim,miktar:parseFloat(t.miktar),toplamFiyat:parseFloat(t.fiyat)*parseFloat(t.miktar),musteriId:x};K(a=>[...a,s]),g({barkod:"",urunAdi:"",fiyat:"",birim:"adet",miktar:"",toplamFiyat:"",musteriId:x}),n("Ürün sepete eklendi.","success"),setTimeout(()=>{var a;(a=document.querySelector('input[name="barkod"]'))==null||a.focus()},100)},Qe=s=>{K(a=>a.filter(r=>r.id!==s)),n("Ürün silindi.","success")},We=()=>H.reduce((s,a)=>s+a.toplamFiyat,0).toLocaleString("tr-TR"),Xe=async()=>{var s,a;if(H.length===0){n("En az bir ürün ekleyin.","error");return}k(!0);try{const r=H.map(i=>({barkod:i.barkod,urunAdi:i.urunAdi,fiyat:i.fiyat,birim:i.birim,miktar:i.miktar,toplamFiyat:i.toplamFiyat,musteriId:parseInt(x)}));await A.post(`${C}/musteriSatis/musteriSatis-create`,r),n("Satış(lar) kaydedildi.","success"),G(!1),K([]),Q()}catch(r){n(((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.message)||"Satış kaydedilemedi.","error")}finally{k(!1)}},Ze=s=>{Le(s),g({barkod:s.barkod,urunAdi:s.urunAdi,fiyat:s.fiyat,birim:s.birim,miktar:s.miktar,toplamFiyat:s.toplamFiyat,musteriId:x}),O(!0)},es=async()=>{var s,a;if(!t.barkod||!t.urunAdi||!t.fiyat||!t.miktar){n("Tüm alanlar doldurulmalıdır.","error");return}k(!0);try{const r={id:$e.id,barkod:t.barkod,urunAdi:t.urunAdi,fiyat:parseFloat(t.fiyat),birim:t.birim,miktar:parseFloat(t.miktar),toplamFiyat:parseFloat(t.fiyat)*parseFloat(t.miktar),musteriId:parseInt(x)};await A.put(`${C}/musteriSatis/musteriSatis-update`,r),n("Satış güncellendi.","success"),O(!1),Q()}catch(r){n(((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.message)||"Satış güncellenemedi.","error")}finally{k(!1)}},ss=async s=>{var a,r;k(!0);try{await A.delete(`${C}/musteriSatis/musteriSatis-delete/${s}`),n("Satış silindi.","success"),Q()}catch(i){n(((r=(a=i.response)==null?void 0:a.data)==null?void 0:r.message)||"Satış silinemedi.","error")}finally{k(!1)}};return T||!h?e.jsxs(M,{children:[e.jsx(D,{children:"Müşteri Bilgisi"}),e.jsxs(E,{children:[T?e.jsx("p",{children:"Yükleniyor..."}):e.jsx("p",{children:"Müşteri bulunamadı."}),e.jsx(u,{color:"primary",onClick:()=>Z("/app/customers"),children:"Geri Dön"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(ls,{placement:"top-end",className:"p-3",children:De}),e.jsxs(B,{children:[e.jsx(m,{xs:12,children:e.jsxs(M,{children:[e.jsx(D,{style:{backgroundColor:"#2965A8",color:"#fff",fontSize:"24px"},children:e.jsxs(B,{className:"align-items-center",children:[e.jsx(m,{xs:2,children:e.jsx("img",{src:h.image?`https://speedsofttest.com/${h.image}`:`https://speedsofttest.com/${h.image}`,alt:"Müşteri resmi",style:{width:"100px",height:"100px",objectFit:"cover"}})}),e.jsxs(m,{xs:8,children:[e.jsx("h3",{children:h.name.toUpperCase()}),e.jsxs("p",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Telefon:"})," ",h.phone]}),e.jsxs("p",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Telefon 2:"})," ",h.phone2||"Yok"]}),e.jsxs("p",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"E-Posta:"})," ",h.email]}),e.jsxs("p",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Adres:"})," ",h.address]}),e.jsxs("p",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Vergi Dairesi/No:"})," ",h.taxOffice,"/",h.taxOrIdNumber]})]}),e.jsx(m,{xs:2,className:"d-flex justify-content-end align-items-center gap-2"})]})}),e.jsx(E,{children:e.jsxs(B,{children:[e.jsx(m,{children:e.jsxs(M,{children:[e.jsx(D,{className:"bg-danger",style:{color:"white"},children:"Açık Bakiye"}),e.jsx(E,{children:e.jsxs("p",{className:"fw-bold",children:[(h.openBalance||0).toLocaleString("tr-TR")," ","TRY"]})})]})}),e.jsx(m,{children:e.jsxs(M,{children:[e.jsx(D,{className:"bg-warning",style:{color:"white"},children:"Çek Bakiyesi"}),e.jsx(E,{children:e.jsxs("p",{className:"fw-bold",children:[(h.chequeBalance||0).toLocaleString("tr-TR")," ","TRY"]})})]})}),e.jsx(m,{children:e.jsxs(M,{children:[e.jsx(D,{className:"bg-info",style:{color:"white"},children:"Senet Bakiyesi"}),e.jsx(E,{children:e.jsxs("p",{className:"fw-bold",children:[(h.bondBalance||0).toLocaleString("tr-TR")," ","TRY"]})})]})}),e.jsx(m,{children:e.jsxs(M,{children:[e.jsx(D,{className:"bg-success",style:{color:"white"},children:"Ciro"}),e.jsx(E,{children:e.jsxs("p",{className:"fw-bold",children:[(h.turnover||0).toLocaleString("tr-TR")," TRY"]})})]})})]})})]})}),e.jsx(m,{xs:12,className:"my-3 d-flex",children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(u,{color:"success",style:{color:"white"},onClick:()=>p("Satış Yap"),disabled:!1,children:"Satış Yap"}),e.jsx(u,{color:"primary",style:{color:"white",backgroundColor:"#2965A8"},onClick:()=>U(!0),disabled:T,children:"Yeni Şube Ekle"}),e.jsxs(re,{children:[e.jsx(ie,{color:"info",style:{color:"white"},disabled:!0,children:"Ödeme/Tahsilat"}),e.jsxs(te,{children:[e.jsx(y,{onClick:()=>p("Nakit-Kredi Kartı-Banka"),disabled:!0,children:"Nakit-Kredi Kartı-Banka"}),e.jsx(y,{onClick:()=>p("Temazsız Kredi Kartı"),disabled:!0,children:"Temazsız Kredi Kartı"}),e.jsx(y,{onClick:()=>p("Çek"),disabled:!0,children:"Çek"}),e.jsx(y,{onClick:()=>p("Müşteriden Senet Al"),disabled:!0,children:"Müşteriden Senet Al"}),e.jsx(y,{onClick:()=>p("Müşteriye Senet Ver"),disabled:!0,children:"Müşteriye Senet Ver"}),e.jsx(y,{onClick:()=>p("Bakiye Düzelt"),disabled:!0,children:"Bakiye Düzelt"}),e.jsx(y,{onClick:()=>p("Borç-Alacak Fişleri"),disabled:!0,children:"Borç-Alacak Fişleri"}),e.jsx(y,{onClick:()=>p("Cari Virman"),disabled:!0,children:"Cari Virman"})]})]}),e.jsxs(re,{children:[e.jsx(ie,{color:"secondary",disabled:!0,children:"Hesap Ekstresi"}),e.jsxs(te,{children:[e.jsx(y,{onClick:()=>p("Ekstre Linki"),disabled:!0,children:"Ekstre Linki"}),e.jsx(y,{onClick:()=>p("Ekstre"),disabled:!0,children:"Ekstre"}),e.jsx(y,{onClick:()=>p("Detaylı Ekstre"),disabled:!0,children:"Detaylı Ekstre"}),e.jsx(y,{onClick:()=>p("Mutabakat Mektubu"),disabled:!0,children:"Mutabakat Mektubu"})]})]}),e.jsx(u,{color:"primary",style:{color:"white"},onClick:()=>p("Döküman Yükle"),disabled:!0,children:"Döküman Yükle"}),e.jsxs(re,{children:[e.jsx(ie,{color:"secondary",children:"Diğer İşlemler"}),e.jsxs(te,{children:[e.jsx(y,{onClick:()=>ae(!0),children:"Müşteri Bilgilerini Güncelle"}),e.jsx(y,{onClick:()=>p("E-Posta Gönderi Durumu"),disabled:!0,children:"E-Posta Gönderi Durumu"}),e.jsx(y,{onClick:()=>p("Alış Yap"),disabled:!0,children:"Alış Yap"}),e.jsx(y,{onClick:()=>V(!0),children:"Müşteriyi Sil"}),e.jsx(y,{onClick:_e,children:"Müşteriyi Aktif Et"}),e.jsx(y,{onClick:()=>p("Etiket Yazdır"),disabled:!0,children:"Etiket Yazdır"})]})]})]})}),e.jsx(m,{xs:12,children:e.jsx(B,{children:[{title:"Önceki Satışlar",data:he,type:"sales"},{title:"Önceki Ödemeler",data:Se,type:"payments"},{title:"Şubeler",data:me,type:"branches"}].map(s=>e.jsx(m,{className:"mt-3",children:e.jsxs(M,{children:[e.jsx(D,{style:{backgroundColor:"#2965A8",color:"white"},children:s.title}),e.jsx(E,{children:e.jsxs(le,{responsive:!0,children:[e.jsx(ne,{children:e.jsx(F,{children:s.type==="branches"?e.jsxs(e.Fragment,{children:[e.jsx(c,{children:"Şube Adı"}),e.jsx(c,{children:"Adres"}),e.jsx(c,{children:"Kod"}),e.jsx(c,{children:"Aktif"}),e.jsx(c,{children:"İşlemler"})]}):s.type==="sales"?e.jsxs(e.Fragment,{children:[e.jsx(c,{children:"Barkod"}),e.jsx(c,{children:"Ürün Adı"}),e.jsx(c,{children:"Fiyat"}),e.jsx(c,{children:"Birim"}),e.jsx(c,{children:"Miktar"}),e.jsx(c,{children:"Toplam Fiyat"}),e.jsx(c,{children:"İşlemler"})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{children:"Tarih"}),e.jsx(c,{children:"No"}),e.jsx(c,{children:"Durum"}),e.jsx(c,{children:"Tutar"})]})})}),e.jsx(de,{children:s.type==="branches"?me.map(a=>e.jsxs(F,{children:[e.jsx(o,{children:a.adi||"Bilinmiyor"}),e.jsx(o,{children:a.adres||"Yok"}),e.jsx(o,{children:a.kodu||"Yok"}),e.jsx(o,{children:a.aktif?"Evet":"Hayır"}),e.jsx(o,{children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(u,{color:"info",size:"sm",onClick:()=>qe(a),style:{color:"white"},children:e.jsx(Y,{icon:be})}),e.jsx(u,{color:"danger",size:"sm",onClick:()=>Ve(a.id),style:{color:"white"},children:e.jsx(Y,{icon:oe})})]})})]},a.id)):s.type==="sales"?he.map(a=>e.jsxs(F,{children:[e.jsx(o,{children:a.barkod}),e.jsx(o,{children:a.urunAdi}),e.jsxs(o,{children:[a.fiyat.toLocaleString("tr-TR")," TRY"]}),e.jsx(o,{children:a.birim}),e.jsx(o,{children:a.miktar}),e.jsxs(o,{children:[a.toplamFiyat.toLocaleString("tr-TR")," ","TRY"]}),e.jsx(o,{children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(u,{color:"info",size:"sm",onClick:()=>Ze(a),style:{color:"white"},children:e.jsx(Y,{icon:be})}),e.jsx(u,{color:"danger",size:"sm",onClick:()=>ss(a.id),style:{color:"white"},children:e.jsx(Y,{icon:oe})})]})})]},a.id)):s.data.map(a=>e.jsxs(F,{onClick:()=>pe(a,s.type),children:[e.jsx(o,{children:e.jsxs(u,{color:"success",size:"sm",style:{color:"white"},onClick:()=>pe(null,s.type),children:[e.jsx(Y,{icon:ns})," Yeni"]})}),e.jsx(o,{children:a.date}),e.jsx(o,{children:a.no}),e.jsx(o,{children:a.status}),e.jsxs(o,{children:[a.amount.toLocaleString("tr-TR")," TRY"]})]},a.id))})]})})]})},s.title))})})]}),e.jsxs(I,{visible:we,onClose:()=>ee(!1),backdrop:"static",children:[e.jsx(z,{children:e.jsxs(R,{children:[se.charAt(0).toUpperCase()+se.slice(1)," Detayları"]})}),e.jsxs($,{children:[e.jsxs(le,{responsive:!0,children:[e.jsx(ne,{children:e.jsxs(F,{children:[e.jsx(c,{children:"Ürün/Hizmet Adı"}),e.jsx(c,{children:"Fiyat"}),e.jsx(c,{children:"Tutar"})]})}),e.jsx(de,{children:N&&e.jsxs(F,{children:[e.jsx(o,{children:N.name}),e.jsxs(o,{children:[N.price.toLocaleString("tr-TR")," TRY"]}),e.jsxs(o,{children:[N.amount.toLocaleString("tr-TR")," TRY"]})]})})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Açıklama:"})," ",(N==null?void 0:N.description)||"Yok"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kullanıcı:"})," ",(N==null?void 0:N.user)||"Bilinmiyor"]})]}),e.jsxs(L,{children:[e.jsx(u,{color:"primary",onClick:()=>Z(`/app/${se}-entry`),style:{color:"white"},children:"Satış Ekranına Git"}),e.jsx(u,{color:"secondary",onClick:()=>ee(!1),children:"Kapat"})]})]}),e.jsxs(I,{visible:Ne,onClose:()=>U(!1),backdrop:"static",children:[e.jsx(z,{style:{backgroundColor:"#2965A8",color:"white"},children:e.jsx(R,{children:"Yeni Şube Ekle"})}),e.jsx($,{children:e.jsxs(W,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Şube Adı"}),e.jsx(S,{type:"text",name:"adi",value:j.adi,onChange:s=>v(a=>({...a,adi:s.target.value})),required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Şube Adresi"}),e.jsx(S,{type:"text",name:"adres",value:j.adres,onChange:s=>v(a=>({...a,adres:s.target.value}))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Şube Kodu"}),e.jsx(S,{type:"text",name:"kodu",value:j.kodu,onChange:s=>v(a=>({...a,kodu:s.target.value}))})]}),e.jsx("div",{className:"mb-3",children:e.jsx(ge,{label:"Aktif",name:"aktif",checked:j.aktif,onChange:s=>v(a=>({...a,aktif:s.target.checked})),style:{color:"white"}})})]})}),e.jsxs(L,{children:[e.jsx(u,{color:"primary",style:{backgroundColor:"#2965A8",color:"white"},onClick:Ue,disabled:T,children:"Ekle"}),e.jsx(u,{color:"secondary",style:{color:"white"},onClick:()=>{U(!1),v({adi:"",adres:"",kodu:"",aktif:!0})},children:"İptal"})]})]}),e.jsxs(I,{visible:Fe,onClose:()=>q(!1),backdrop:"static",children:[e.jsx(z,{style:{backgroundColor:"#2965A8",color:"white"},children:e.jsx(R,{children:"Şube Güncelle"})}),e.jsx($,{children:e.jsxs(W,{children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Şube Adı"}),e.jsx(S,{type:"text",name:"adi",value:j.adi,onChange:s=>v(a=>({...a,adi:s.target.value})),required:!0})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Şube Adresi"}),e.jsx(S,{type:"text",name:"adres",value:j.adres,onChange:s=>v(a=>({...a,adres:s.target.value}))})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Şube Kodu"}),e.jsx(S,{type:"text",name:"kodu",value:j.kodu,onChange:s=>v(a=>({...a,kodu:s.target.value}))})]}),e.jsx("div",{className:"mb-3",children:e.jsx(ge,{label:"Aktif",name:"aktif",checked:j.aktif,onChange:s=>v(a=>({...a,aktif:s.target.checked})),style:{color:"white"}})})]})}),e.jsxs(L,{children:[e.jsx(u,{color:"primary",style:{backgroundColor:"#2965A8",color:"white"},onClick:Ge,disabled:T,children:"Güncelle"}),e.jsx(u,{color:"secondary",style:{color:"white"},onClick:()=>q(!1),children:"İptal"})]})]}),e.jsxs(I,{visible:Me,onClose:()=>{G(!1),g({barkod:"",urunAdi:"",fiyat:"",birim:"adet",miktar:"",toplamFiyat:"",musteriId:x}),K([])},backdrop:"static",size:"lg",children:[e.jsx(z,{style:{backgroundColor:"#2965A8",color:"white"},children:e.jsx(R,{children:"Yeni Satış"})}),e.jsxs($,{children:[e.jsxs(W,{children:[e.jsxs(B,{children:[e.jsxs(m,{md:6,className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Barkod"}),e.jsx(S,{type:"text",name:"barkod",value:t.barkod,onChange:s=>{const a=s.target.value;g(r=>({...r,barkod:a})),Pe(a)},onKeyPress:s=>{s.key==="Enter"&&(s.preventDefault(),ye(t.barkod))},placeholder:"Barkod girin veya okutun",autoFocus:!0})]}),e.jsxs(m,{md:6,className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Ürün Adı"}),e.jsx(S,{type:"text",name:"urunAdi",value:t.urunAdi,onChange:s=>g(a=>({...a,urunAdi:s.target.value})),placeholder:"Ürün adı girin",required:!0})]})]}),e.jsxs(B,{children:[e.jsxs(m,{md:4,className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Fiyat (TRY)"}),e.jsx(S,{type:"number",name:"fiyat",value:t.fiyat,onChange:s=>{const a=s.target.value,r=parseFloat(t.miktar)||0,i=a&&r?(parseFloat(a)*r).toFixed(2):"";g(l=>({...l,fiyat:a,toplamFiyat:i}))},placeholder:"Fiyat girin",min:"0",step:"0.01",required:!0})]}),e.jsxs(m,{md:4,className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Birim"}),e.jsxs(Ce,{name:"birim",value:t.birim,onChange:s=>g(a=>({...a,birim:s.target.value})),children:[e.jsx("option",{value:"adet",children:"Adet"}),e.jsx("option",{value:"metre",children:"Metre"}),e.jsx("option",{value:"kilogram",children:"Kilogram"}),e.jsx("option",{value:"litre",children:"Litre"})]})]}),e.jsxs(m,{md:4,className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Miktar"}),e.jsx(S,{type:"number",name:"miktar",value:t.miktar,onChange:s=>{const a=s.target.value,r=parseFloat(t.fiyat)||0,i=a&&r?(parseFloat(a)*r).toFixed(2):"";g(l=>({...l,miktar:a,toplamFiyat:i}))},placeholder:"Miktar girin",min:"0",step:"0.01",required:!0})]})]}),e.jsx(u,{color:"primary",style:{color:"white",backgroundColor:"#2965A8"},onClick:Je,children:"Ürün Ekle"})]}),e.jsx("hr",{}),e.jsx("h5",{children:"Eklenen Ürünler"}),e.jsxs(le,{responsive:!0,children:[e.jsx(ne,{children:e.jsxs(F,{children:[e.jsx(c,{children:"Barkod"}),e.jsx(c,{children:"Ürün Adı"}),e.jsx(c,{children:"Fiyat"}),e.jsx(c,{children:"Birim"}),e.jsx(c,{children:"Miktar"}),e.jsx(c,{children:"Toplam"}),e.jsx(c,{children:"İşlemler"})]})}),e.jsx(de,{children:H.length>0?H.map(s=>e.jsxs(F,{children:[e.jsx(o,{children:s.barkod||"Yok"}),e.jsx(o,{children:s.urunAdi}),e.jsxs(o,{children:[s.fiyat.toLocaleString("tr-TR")," TRY"]}),e.jsx(o,{children:s.birim}),e.jsx(o,{children:s.miktar}),e.jsxs(o,{children:[s.toplamFiyat.toLocaleString("tr-TR")," TRY"]}),e.jsx(o,{children:e.jsx(u,{color:"danger",size:"sm",style:{color:"white"},onClick:()=>Qe(s.id),disabled:T,children:e.jsx(Y,{icon:oe})})})]},s.id)):e.jsx(F,{children:e.jsx(o,{colSpan:7,children:"Henüz ürün eklenmedi."})})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("strong",{children:"Toplam Fiyat: "}),We()," TRY"]})]}),e.jsxs(L,{children:[e.jsx(u,{color:"primary",style:{backgroundColor:"#2965A8",color:"white"},onClick:Xe,disabled:T,children:"Kaydet"}),e.jsx(u,{color:"secondary",style:{color:"white"},onClick:()=>{G(!1),g({barkod:"",urunAdi:"",fiyat:"",birim:"adet",miktar:"",toplamFiyat:"",musteriId:x}),K([])},children:"İptal"})]})]}),e.jsxs(I,{visible:Re,onClose:()=>O(!1),backdrop:"static",size:"lg",children:[e.jsx(z,{style:{backgroundColor:"#2965A8",color:"white"},children:e.jsx(R,{children:"Satış Güncelle"})}),e.jsx($,{children:e.jsxs(W,{children:[e.jsxs(B,{children:[e.jsxs(m,{md:6,className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Barkod"}),e.jsx(S,{type:"text",name:"barkod",value:t.barkod,onChange:s=>g(a=>({...a,barkod:s.target.value})),placeholder:"Barkod girin"})]}),e.jsxs(m,{md:6,className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Ürün Adı"}),e.jsx(S,{type:"text",name:"urunAdi",value:t.urunAdi,onChange:s=>g(a=>({...a,urunAdi:s.target.value})),placeholder:"Ürün adı girin",required:!0})]})]}),e.jsxs(B,{children:[e.jsxs(m,{md:4,className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Fiyat (TRY)"}),e.jsx(S,{type:"number",name:"fiyat",value:t.fiyat,onChange:s=>g(a=>({...a,fiyat:s.target.value})),placeholder:"Fiyat girin",min:"0",step:"0.01",required:!0})]}),e.jsxs(m,{md:4,className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Birim"}),e.jsxs(Ce,{name:"birim",value:t.birim,onChange:s=>g(a=>({...a,birim:s.target.value})),children:[e.jsx("option",{value:"adet",children:"Adet"}),e.jsx("option",{value:"metre",children:"Metre"}),e.jsx("option",{value:"kilogram",children:"Kilogram"}),e.jsx("option",{value:"litre",children:"Litre"})]})]}),e.jsxs(m,{md:4,className:"mb-3",children:[e.jsx(b,{className:"form-label",children:"Miktar"}),e.jsx(S,{type:"number",name:"miktar",value:t.miktar,onChange:s=>g(a=>({...a,miktar:s.target.value})),placeholder:"Miktar girin",min:"0",step:"0.01",required:!0})]})]})]})}),e.jsxs(L,{children:[e.jsx(u,{color:"primary",style:{backgroundColor:"#2965A8",color:"white"},onClick:es,disabled:T,children:"Güncelle"}),e.jsx(u,{color:"secondary",style:{color:"white"},onClick:()=>O(!1),children:"İptal"})]})]}),e.jsx(hs,{visible:Ye,onClose:()=>ae(!1),onSubmit:s=>{P(),ce({...h,...s}),n("Müşteri güncellendi.","success"),ae(!1)},customer:h,addToast:n}),e.jsxs(I,{visible:ze,onClose:()=>V(!1),backdrop:"static",children:[e.jsx(z,{style:{backgroundColor:"#dc3545",color:"white"},children:e.jsx(R,{children:"Silme Onayı"})}),e.jsx($,{children:"Bu müşteriyi silmek istediğinizden emin misiniz? Bu işlem geri alınamaz."}),e.jsxs(L,{children:[e.jsx(u,{color:"danger",onClick:Oe,children:"Evet, Sil"}),e.jsx(u,{color:"secondary",onClick:()=>V(!1),children:"Hayır"})]})]})]})};export{bs as default};
