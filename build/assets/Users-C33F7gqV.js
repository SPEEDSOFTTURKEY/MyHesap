import{r as t,u as A,A as I,j as e,C as E,q as f,m as N,g as u,h as y,s as w,e as U,f as $,n as H,N as W,Q as L,S as P,T as V,W as Y,t as S,a as _,b as q,c as O}from"./index-DvA_wB1j.js";import{c as Q}from"./cil-reload-6LI_qKMh.js";const v="https://speedsofttest.com/api",X=()=>{const[d,j]=t.useState([]),[p,k]=t.useState(!1),[C,b]=t.useState(null),[M,m]=t.useState(!1),[r,h]=t.useState(null),K=A(),[B,T]=t.useState([]),z=t.useRef(),{user:i}=I(),x=async()=>{var a;k(!0);try{const s=await S.get(`${v}/kullanicilar/kullanicilar-get-all`);console.log("API Response:",s.data);const l=Array.isArray(s.data)?s.data:s.data.data||[];j(l),b(null)}catch(s){const l=s.response?`Durum: ${s.response.status}, Mesaj: ${((a=s.response.data)==null?void 0:a.message)||s.message}`:s.message;b("KullanÄ±cÄ±lar alÄ±namadÄ±: "+l),console.log("Error Details:",l),o("KullanÄ±cÄ±lar yÃ¼klenemedi","error"),j([])}finally{k(!1)}},D=async()=>{var a;if(!(r!=null&&r.id)){o("KullanÄ±cÄ± ID'si eksik","error"),m(!1),h(null);return}try{await S.delete(`${v}/kullanicilar/kullanicilar-delete/${r.id}`),o("KullanÄ±cÄ± baÅŸarÄ±yla silindi"),await x()}catch(s){const l=s.response&&((a=s.response.data)==null?void 0:a.message)||s.message;o(`KullanÄ±cÄ± silinirken hata oluÅŸtu: ${l}`,"error")}finally{m(!1),h(null)}},o=(a,s="success")=>{const l=Date.now(),c=e.jsxs(_,{autohide:!0,visible:!0,delay:5e3,className:s==="error"?"bg-danger text-white":"bg-success text-white",children:[e.jsx(q,{closeButton:!0,children:e.jsx("strong",{className:"me-auto",children:s==="error"?"Hata":"BaÅŸarÄ±lÄ±"})}),e.jsx(O,{children:a})]},l);return T(g=>[...g,c]),l};t.useEffect(()=>{x(),console.log("Users Data:",d)},[]);const R=a=>{if((i==null?void 0:i.yetkiId)!==1&&(i==null?void 0:i.id)!==a.id){o("BaÅŸka kullanÄ±cÄ±yÄ± gÃ¶rÃ¼ntÃ¼leme/dÃ¼zenleme yetkiniz yok","error");return}if(!a.id){o("KullanÄ±cÄ± ID'si bulunamadÄ±","error"),console.error("Users - Invalid user ID:",a);return}K(`/app/user-detail/${a.id}`,{state:{user:a}})};return e.jsxs(e.Fragment,{children:[e.jsx(E,{ref:z,placement:"top-end",className:"p-3",children:B.map(a=>a)}),e.jsx("div",{className:"d-flex gap-2 mb-3",children:e.jsxs(f,{color:"primary",className:"text-light",onClick:x,disabled:p,children:[e.jsx(N,{icon:Q,size:"m"})," KullanÄ±cÄ±larÄ± Yenile"]})}),p&&e.jsx(u,{className:"mb-3",children:e.jsx(y,{children:"YÃ¼kleniyor..."})}),C&&e.jsxs(u,{className:"mt-3",children:[e.jsx(w,{children:"Hata"}),e.jsxs(y,{children:[e.jsx("p",{children:C}),e.jsx(f,{color:"primary",onClick:x,children:"Tekrar Dene"})]})]}),e.jsxs(u,{className:"my-3",children:[e.jsx(w,{style:{backgroundColor:"#2965A8",color:"#FFFFFF",fontSize:"large",fontWeight:"bold"},size:"xl",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center w-100",children:[e.jsx("span",{children:"KullanÄ±cÄ± KartlarÄ±"}),e.jsxs("div",{style:{backgroundColor:"#FFFFFF",color:"#2965A8",padding:"5px 10px",borderRadius:"4px",fontWeight:"bold",fontSize:"14px",minWidth:"40px",textAlign:"center"},children:["Toplam KullanÄ±cÄ±: ",d.length]})]})}),e.jsxs(y,{children:[e.jsx("p",{children:"Bir kullanÄ±cÄ±ya tÄ±klayarak detaylarÄ±nÄ± gÃ¶rÃ¼ntÃ¼leyebilir veya dÃ¼zenleyebilirsiniz."}),d.length>0?e.jsx(U,{children:d.filter(a=>{const s=Number(a==null?void 0:a.aktiflikDurumu)===1||Number(a==null?void 0:a.aktif)===1,l=!!(a!=null&&a.adiSoyadi)&&a.adiSoyadi.trim().length>0,c=!!(a!=null&&a.email)&&a.email.trim().length>0;return console.log("Filtreleme kontrolÃ¼:",{user:a,aktifMi:s,adiSoyadiVarMi:l,emailVarMi:c}),s&&l&&c}).map((a,s)=>{var F;const l=a.adiSoyadi.trim(),c=a.email.trim(),g=(F=a.fotograf)==null?void 0:F.trim();return console.log("ðŸ“Œ Filtre sonrasÄ± kart verisi:",a),e.jsx($,{md:4,className:"mb-3",children:e.jsx(u,{className:"h-100 shadow-sm",style:{cursor:"pointer",transition:"background-color 0.2s, transform 0.2s"},onClick:()=>R(a),onMouseEnter:n=>{n.currentTarget.style.backgroundColor="#f8f9fa",n.currentTarget.style.transform="scale(1.02)"},onMouseLeave:n=>{n.currentTarget.style.backgroundColor="white",n.currentTarget.style.transform="scale(1)"},children:e.jsxs(y,{className:"d-flex align-items-center",children:[e.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",overflow:"hidden",marginRight:"15px",backgroundColor:"#e9ecef",display:"flex",alignItems:"center",justifyContent:"center"},children:g?e.jsx("img",{src:g,alt:"User Profile",style:{width:"100%",height:"100%",objectFit:"cover"},onError:n=>n.target.src=""}):e.jsx(N,{icon:H,size:"xl"})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("h6",{className:"mb-0",children:l}),e.jsx("p",{className:"mb-0 text-muted",children:c})]})]})})},a.id||s)})}):e.jsx("p",{children:"KullanÄ±cÄ± bulunamadÄ±."})]})]}),e.jsxs(W,{visible:M,onClose:()=>{m(!1),h(null)},className:"shadow-sm",backdrop:"static",children:[e.jsx(L,{style:{backgroundColor:"#dc3545",color:"#FFFFFF",borderBottom:"2px solid #ffffff"},children:e.jsx(P,{children:"Silme OnayÄ±"})}),e.jsx(V,{children:e.jsxs("p",{children:['KullanÄ±cÄ± "',e.jsx("strong",{children:(r==null?void 0:r.adiSoyadi)||"Bilinmeyen KullanÄ±cÄ±"}),'" silinecek, emin misiniz? Bu iÅŸlem geri alÄ±namaz.']})}),e.jsxs(Y,{children:[e.jsx(f,{color:"secondary",onClick:()=>{m(!1),h(null)},children:"Ä°ptal"}),e.jsx(f,{color:"danger",onClick:D,className:"text-white",children:"Sil"})]})]})]})};export{X as default};
