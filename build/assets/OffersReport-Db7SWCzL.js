import{r as R,Z as j,j as e,g as O,s as w,h as A,e as E,f as n,U as o,V as p,ao as f,o as s,aB as L}from"./index-DAwD_DDx.js";import{R as W}from"./ReportForm-C3lYwj_n.js";import{D as k}from"./DatePickerField-BF_HZaNO.js";const H=a=>{try{a.setFont("times","normal"),console.log("Times fontu kullanılıyor (Türkçe karakter desteği ile)")}catch(m){console.error("Font ayarlama hatası:",m),a.setFont("helvetica","normal")}},$=()=>{const[a,m]=R.useState({searchType:"",dateRangeStart:j(),dateRangeEnd:j(),documentStatus:[],reportType:"",documentType:"",columns:[],documentNumber:"",class1:"",class2:"",customerType:"",customer:"",productService:"",category:"",brand:"",warehouse:""}),l=t=>{const{name:i,value:c,type:T,checked:g}=t.target;m(T==="checkbox"?d=>({...d,[i]:g?[...d[i],c]:d[i].filter(x=>x!==c)}):d=>({...d,[i]:c}))},S=(t,i)=>{m(c=>({...c,[t]:i}))},v=()=>{const t=new L;H(t),t.setFontSize(18),t.text("Teklifler Raporu",105,15,{align:"center"});const i=j().format("DD/MM/YYYY HH:mm:ss");t.setFontSize(10),t.text(`Olusturulma Tarihi: ${i}`,105,25,{align:"center"}),t.setFontSize(14),t.text("Rapor Kriterleri",14,35);const c=()=>{if(a.documentStatus.length===0)return"Secilmedi";const r={all:"Hepsini Sec",openOffers:"Acik Teklifler",closedOffers:"Kapanmis Teklifler",acceptedOffers:"Kabul Edilen Teklifler"};return a.documentStatus.map(h=>r[h]||h).join(", ")},T=()=>({document:"Belge Tarihine Gore",offer:"Teklif Tarihine Gore"})[a.searchType]||"Seciniz",g=()=>({offer:"Teklif",proforma:"Proforma"})[a.documentType]||"Seciniz",d=()=>({individual:"Bireysel",corporate:"Kurumsal"})[a.customerType]||"Seciniz",x=[["Arama Tipi",T()],["Baslangic Tarihi",a.dateRangeStart.format("DD/MM/YYYY")],["Bitis Tarihi",a.dateRangeEnd.format("DD/MM/YYYY")],["Belge Durumu",c()],["Rapor Turu",a.reportType||"Belirtilmedi"],["Belge Tipi",g()],["Belge Numarasi",a.documentNumber||"Belirtilmedi"],["Sinif 1",a.class1||"Belirtilmedi"],["Sinif 2",a.class2||"Belirtilmedi"],["Musteri Tipi",d()],["Musteri",a.customer||"Belirtilmedi"],["Urun/Hizmet",a.productService||"Belirtilmedi"],["Kategori",a.category||"Belirtilmedi"],["Marka",a.brand||"Belirtilmedi"],["Depo",a.warehouse||"Seciniz"]];t.autoTable({startY:40,head:[["Kriter","Deger"]],body:x,theme:"grid",headStyles:{fillColor:[41,101,168],fontStyle:"bold",textColor:[255,255,255]},styles:{font:"times",fontStyle:"normal",cellPadding:3,fontSize:10,overflow:"linebreak"},columnStyles:{0:{cellWidth:50,fontStyle:"bold"},1:{cellWidth:100}}});const u=[{id:1,offerNo:"TKF-2023-001",date:"01/01/2023",customer:"Musteri A Sisli",amount:"15.250,00 TL",status:"Acik"},{id:2,offerNo:"TKF-2023-002",date:"02/01/2023",customer:"Musteri B Cankaya",amount:"28.450,50 TL",status:"Kabul"},{id:3,offerNo:"TKF-2023-003",date:"03/01/2023",customer:"Musteri C Uskudar",amount:"33.750,75 TL",status:"Kapali"},{id:4,offerNo:"TKF-2023-004",date:"04/01/2023",customer:"Musteri D Kadikoy",amount:"42.850,25 TL",status:"Acik"},{id:5,offerNo:"TKF-2023-005",date:"05/01/2023",customer:"Musteri E Besiktas",amount:"55.950,00 TL",status:"Kabul"}];t.setFontSize(14),t.text("Teklif Verileri",14,t.autoTable.previous.finalY+15),t.autoTable({startY:t.autoTable.previous.finalY+20,head:[["ID","Teklif No","Tarih","Musteri","Tutar","Durum"]],body:u.map(r=>[r.id,r.offerNo,r.date,r.customer,r.amount,r.status]),theme:"grid",headStyles:{fillColor:[41,101,168],fontStyle:"bold",textColor:[255,255,255]},styles:{font:"times",fontStyle:"normal",cellPadding:3,fontSize:10,overflow:"linebreak"},columnStyles:{0:{cellWidth:15},1:{cellWidth:35},2:{cellWidth:25},3:{cellWidth:50},4:{cellWidth:35,halign:"right"},5:{cellWidth:25}}}),t.setFontSize(14),t.text("Ozet",14,t.autoTable.previous.finalY+15);const b=u.reduce((r,h)=>{const K=parseFloat(h.amount.replace(/\./g,"").replace(",",".").replace(" TL",""));return r+K},0),D=b/u.length,M=u.length,B=u.filter(r=>r.status==="Kabul").length,N=u.filter(r=>r.status==="Acik").length,y=r=>r.toFixed(2).replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")+" TL",Y=[["Toplam Teklif Tutari",y(b)],["Ortalama Teklif Tutari",y(D)],["Toplam Teklif Sayisi",`${M} adet`],["Kabul Edilen Teklifler",`${B} adet`],["Acik Teklifler",`${N} adet`],["Rapor Donemi",`${a.dateRangeStart.format("DD/MM/YYYY")} - ${a.dateRangeEnd.format("DD/MM/YYYY")}`]];t.autoTable({startY:t.autoTable.previous.finalY+20,body:Y,theme:"grid",styles:{font:"times",fontStyle:"normal",cellPadding:3,fontSize:10,overflow:"linebreak"},columnStyles:{0:{cellWidth:60,fontStyle:"bold"},1:{cellWidth:50,halign:"right"}}});const z=t.output("blob"),F=URL.createObjectURL(z);window.open(F,"_blank")},C=t=>{t&&typeof t.preventDefault=="function"&&t.preventDefault(),v()};return e.jsxs(O,{children:[e.jsx(w,{style:{backgroundColor:"#2965A8",color:"#fff"},children:"Teklifler"}),e.jsx(A,{children:e.jsx(W,{onSubmit:C,children:e.jsxs(E,{children:[e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Arama"}),e.jsxs(p,{name:"searchType",value:a.searchType,onChange:l,className:"mb-3",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"document",children:"Belge Tarihine Göre"}),e.jsx("option",{value:"offer",children:"Teklif Tarihine Göre"})]})]}),e.jsxs(n,{md:6,className:"d-flex gap-5 align-items-center",children:[e.jsx(k,{label:"Başlangıç Tarihi",value:a.dateRangeStart,onChange:t=>S("dateRangeStart",t)}),e.jsx(k,{label:"Bitiş Tarihi",value:a.dateRangeEnd,onChange:t=>S("dateRangeEnd",t)})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Belge Durumu"}),e.jsxs("div",{className:"mb-3",children:[e.jsx(f,{label:"Hepsini Seç",name:"documentStatus",value:"all",checked:a.documentStatus.includes("all"),onChange:l}),e.jsx(f,{label:"Açık Teklifler",name:"documentStatus",value:"openOffers",checked:a.documentStatus.includes("openOffers"),onChange:l}),e.jsx(f,{label:"Kapanmış Teklifler",name:"documentStatus",value:"closedOffers",checked:a.documentStatus.includes("closedOffers"),onChange:l}),e.jsx(f,{label:"Kabul Edilen Teklifler",name:"documentStatus",value:"acceptedOffers",checked:a.documentStatus.includes("acceptedOffers"),onChange:l})]})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Rapor Türü"}),e.jsx(s,{name:"reportType",value:a.reportType,onChange:l,className:"mb-3",placeholder:"Örn: Detaylı, Özet"})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Belge Tipi"}),e.jsxs(p,{name:"documentType",value:a.documentType,onChange:l,className:"mb-3",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"offer",children:"Teklif"}),e.jsx("option",{value:"proforma",children:"Proforma"})]})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Kolonlar"}),e.jsx(s,{name:"columns",value:a.columns,onChange:l,className:"mb-3",placeholder:"Görüntülenecek kolonları belirtin"})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Belge Numarası"}),e.jsx(s,{name:"documentNumber",value:a.documentNumber,onChange:l,className:"mb-3",placeholder:"Örn: TKF-2023-001"})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Sınıf 1"}),e.jsx(s,{name:"class1",value:a.class1,onChange:l,className:"mb-3",placeholder:"Örn: Bölge, Sektör"})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Sınıf 2"}),e.jsx(s,{name:"class2",value:a.class2,onChange:l,className:"mb-3",placeholder:"Örn: Özel Kod, Grup"})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Müşteri Tipi"}),e.jsxs(p,{name:"customerType",value:a.customerType,onChange:l,className:"mb-3",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"individual",children:"Bireysel"}),e.jsx("option",{value:"corporate",children:"Kurumsal"})]})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Müşteri"}),e.jsx(s,{name:"customer",value:a.customer,onChange:l,className:"mb-3",placeholder:"Müşteri adını giriniz"})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Ürün / Hizmet"}),e.jsx(s,{name:"productService",value:a.productService,onChange:l,className:"mb-3",placeholder:"Ürün veya hizmet adı"})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Kategori"}),e.jsx(s,{name:"category",value:a.category,onChange:l,className:"mb-3",placeholder:"Kategori adını giriniz"})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Marka"}),e.jsx(s,{name:"brand",value:a.brand,onChange:l,className:"mb-3",placeholder:"Marka adını giriniz"})]}),e.jsxs(n,{md:6,children:[e.jsx(o,{children:"Depo"}),e.jsxs(p,{name:"warehouse",value:a.warehouse,onChange:l,className:"mb-3",children:[e.jsx("option",{value:"",children:"Seçiniz"}),e.jsx("option",{value:"warehouse1",children:"Ana Depo"}),e.jsx("option",{value:"warehouse2",children:"Yedek Depo"}),e.jsx("option",{value:"warehouse3",children:"Şube Depo"})]})]})]})})})]})};export{$ as default};
