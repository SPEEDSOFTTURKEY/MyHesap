import{j as e,$ as w,a0 as A,a1 as p,a2 as D,a3 as N,a4 as S,r as o,u as B,C as E,q as H,m as R,M as z,g as m,h as j,s as M,t as C,a as $,b as I,c as L}from"./index-DAwD_DDx.js";import{W as P}from"./WarehouseModal-BVHkmdGm.js";const Y=({warehouses:i,onWarehouseClick:c})=>e.jsxs(w,{responsive:!0,hover:!0,children:[e.jsx(A,{children:e.jsx(p,{children:e.jsx(D,{children:"Depo Adı"})})}),e.jsx(N,{children:i.map(l=>e.jsx(p,{onClick:()=>c(l),style:{cursor:"pointer"},children:e.jsx(S,{children:l.adi})},l.id))})]}),g="https://speedsofttest.com/api",U=()=>{const[i,c]=o.useState([]),[l,f]=o.useState([]),[b,u]=o.useState(!1),[h,d]=o.useState(!1),y=o.useRef(),T=B(),x=(s,t="success")=>{const a=Date.now(),r=e.jsxs($,{autohide:!0,visible:!0,delay:5e3,className:t==="error"?"bg-danger text-white":"bg-success text-white",children:[e.jsx(I,{closeButton:!0,children:e.jsx("strong",{className:"me-auto",children:t==="error"?"Hata":"Başarılı"})}),e.jsx(L,{children:s})]},a);return f(n=>[...n,r]),a},k=async()=>{var s,t;try{d(!0);const{data:a}=await C.get(`${g}/depo/get-all`),r=Array.isArray(a)?a.filter(n=>n.durumu===1):[];c(r)}catch(a){x(((t=(s=a.response)==null?void 0:s.data)==null?void 0:t.message)||"Depolar yüklenemedi.","error")}finally{d(!1)}};o.useEffect(()=>{k()},[]);const F=async s=>{var t,a;try{d(!0);const r={adi:s.adi,durumu:1},{data:n}=await C.post(`${g}/depo/create`,r);c(v=>[...v,n]),u(!1),x("Depo başarıyla eklendi.","success")}catch(r){x(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.message)||"Depo eklenemedi.","error")}finally{d(!1)}},W=s=>{T(`/app/warehouse-detail/${s.id}`,{state:{warehouse:s}})};return e.jsxs(e.Fragment,{children:[e.jsx(E,{ref:y,placement:"top-end",className:"p-3",children:l.map(s=>s)}),e.jsx("div",{className:"d-flex gap-2 mb-3",children:e.jsxs(H,{color:"success",className:"text-light",onClick:()=>u(!0),disabled:h,children:[e.jsx(R,{icon:z,size:"m"})," Yeni Depo Ekle"]})}),h&&e.jsx(m,{className:"mb-3",children:e.jsx(j,{children:"Yükleniyor..."})}),e.jsxs(m,{className:"my-3",children:[e.jsx(M,{style:{backgroundColor:"#2965A8",color:"#FFFFFF",fontSize:"large",fontWeight:"bold"},children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center w-100",children:[e.jsx("span",{children:"Depolar"}),e.jsxs("div",{style:{backgroundColor:"#FFFFFF",color:"#2965A8",padding:"5px 10px",borderRadius:"4px",fontWeight:"bold",fontSize:"14px",minWidth:"40px",textAlign:"center"},children:["Toplam Depo: ",i.length]})]})}),e.jsxs(j,{children:[e.jsx("p",{children:"Bir depoya tıklayarak detaylarını görüntüleyebilirsiniz."}),e.jsx(Y,{warehouses:i,onWarehouseClick:W})]})]}),e.jsx(P,{visible:b,onClose:()=>u(!1),onSubmit:F,loading:h})]})};export{U as default};
