import{ai as us,J as hs,u as ms,r as d,j as e,t as I,g as D,s as M,h as T,q as m,C as xs,e as x,f as n,m as Y,B as de,D as oe,E as ce,F as y,$ as ge,a0 as Se,a1 as H,a2 as u,o as f,a3 as Ce,a4 as h,a5 as Ie,a6 as we,N as K,Q as G,S as O,T as q,i as ae,U as j,ao as ve,W as V,V as N,a as js,b as ks,c as ps}from"./index-DtN76qeb.js";import{C as ys}from"./CustomerModal-dPeMX-3Q.js";import{c as Fe}from"./cil-ban-DwIGNTsW.js";const g="https://speedsofttest.com/api",zs=()=>{var ye,fe;const{id:b}=us(),{state:ie}=hs(),ue=ms(),[k,Be]=d.useState((ie==null?void 0:ie.customer)||null),[L,he]=d.useState([]),[fs,bs]=d.useState([]),[gs,Ss]=d.useState([]),[Ae,Cs]=d.useState([]),[me,xe]=d.useState([]),[Is,ws]=d.useState(!1),[vs,Fs]=d.useState(null),[Bs,As]=d.useState(""),[De,_]=d.useState(!1),[Me,J]=d.useState(!1),[Te,Ne]=d.useState(null),[$e,Q]=d.useState(!1),[c,w]=d.useState({adi:"",adres:"",kodu:"",aktif:!0}),[t,$]=d.useState({barkod:"",urunAdi:"",fiyat:"",birim:"adet",miktar:"",toplamFiyat:"",musteriId:b,urunId:"",depoId:""}),[B,W]=d.useState([]),[re,R]=d.useState({}),[A,p]=d.useState(!1),[Ds,je]=d.useState(null),[ze,Ee]=d.useState([]),[Ye,te]=d.useState(!1),[He,ke]=d.useState([]),[Le,X]=d.useState(!1),[Re,Z]=d.useState(!1),[Ms,Pe]=d.useState(null),[P,Ue]=d.useState([]),[z,le]=d.useState([]),[F]=d.useState({id:1002,aktiflikDurumu:1,durumu:1,yetkiId:1,kullaniciAdi:"gizem"}),l=d.useCallback((s,a="success")=>{const i=e.jsxs(js,{autohide:!0,visible:!0,delay:5e3,children:[e.jsx(ks,{closeButton:!0,children:e.jsx("strong",{className:"me-auto",children:a==="error"?"Hata":a==="warning"?"Uyarı":"Başarılı"})}),e.jsx(ps,{children:s})]},Date.now());Ee(r=>[...r,i])},[]),ee=async(s,a)=>{var i,r,o,v;try{const{data:S}=await I.get(s),be=Array.isArray(S)?S.filter(cs=>cs.durumu===1):(S==null?void 0:S.durumu)===1?[S]:[];return a(be),be}catch(S){return console.error("Veri Yükleme Hatası:",{url:s,message:S.message,status:(i=S.response)==null?void 0:i.status,data:(r=S.response)==null?void 0:r.data}),l(((v=(o=S.response)==null?void 0:o.data)==null?void 0:v.message)||"Veriler yüklenemedi.","error"),null}},Ke=async s=>{let a="Bilinmiyor";try{if(s.musteriSiniflandirmaId){const i=He.find(r=>r.id===s.musteriSiniflandirmaId);if(i)a=i.adi;else{const r=await ee(`${g}/musteriSiniflandirma/get-by-id/${s.musteriSiniflandirmaId}`,ke);a=r&&r.length>0?r[0].adi:"Bilinmiyor"}}}catch(i){console.error("Dönüşüm Hatası:",i),a="Bilinmiyor"}return{id:s.id,name:s.unvani||"Bilinmiyor",openBalance:s.acilisBakiye||0,chequeBalance:0,bondBalance:0,turnover:0,phone:s.telefon||"",phone2:s.telefon2||"",classification:a,email:s.email||"",address:s.adres||"",taxOffice:s.vergiDairesi||"",taxOrIdNumber:s.vergiNumarasi||"",accountingCode:s.kodu||"",note:s.aciklama||"",currency:s.paraBirimi||"TRY",riskLimit:s.riskLimiti||0,dueDate:s.vade||"",isTaxExempt:s.vergiMuaf||!1,bankInfo:s.bankaBilgileri||"",contactPerson:s.yetkiliKisi||"",otherContact:s.diger||"",image:s.fotograf||null}},U=d.useCallback(async()=>{var s,a,i,r;p(!0);try{await ee(`${g}/musteriSiniflandirma/get-all`,ke);const{data:o}=await I.get(`${g}/musteri/musteri-get-by-id/${b}`),v=Array.isArray(o)?o[0]:o;if(!v||v.durumu!==1)throw new Error("Müşteri bulunamadı veya aktif değil.");const S=await Ke(v);Be(S),je(null)}catch(o){console.error("Müşteri Yükleme Hatası:",{message:o.message,status:(s=o.response)==null?void 0:s.status,data:(a=o.response)==null?void 0:a.data}),je(((r=(i=o.response)==null?void 0:i.data)==null?void 0:r.message)||"Müşteri yüklenemedi."),l("Müşteri yüklenemedi.","error")}finally{p(!1)}},[b,l]),se=async()=>{try{const s=await ee(`${g}/sube/sube-get-by-musteriId/${b}`,xe);s&&xe(s)}catch{l("Şube verileri yüklenemedi.","error")}},E=async()=>{try{const s=await ee(`${g}/musteriSatis/musteriSatis-get-by-musteri/${b}`,he);s&&he(s)}catch{l("Satış verileri yüklenemedi.","error")}},Ge=async()=>{try{const{data:s}=await I.get(`${g}/urun/urun-get-all`);Ue(s)}catch(s){console.error("Ürünleri Getirme Hatası:",s),l("Ürünler yüklenemedi.","error")}},ne=async s=>{try{const{data:a}=await I.get(`${g}/urun/urun-depolardaki-stoklar/${s}`);if(Array.isArray(a)){const i=a.filter(r=>r.durumu===1);R(r=>({...r,[s]:i}))}else throw new Error("Depo verisi dizi formatında değil.")}catch(a){console.error("Depoları Getirme Hatası:",a),l(`Ürün ID ${s} için depolar yüklenemedi.`,"error"),R(i=>({...i,[s]:[]}))}},Oe=(s,a)=>{let i;return function(...o){const v=()=>{clearTimeout(i),s(...o)};clearTimeout(i),i=setTimeout(v,a)}},qe=async s=>{if(!(!s||s.length<3))try{const{data:a}=await I.get(`${g}/urun/urun-get-barcode?barkod=${s}`);if(a&&a.length>0){const i=a[0];$(r=>({...r,barkod:s,urunAdi:i.adi||"",fiyat:i.satisFiyat?i.satisFiyat.toString():"",birim:i.birimAdi||"adet",miktar:r.miktar||"1",toplamFiyat:r.miktar?(parseFloat(r.miktar)*i.satisFiyat).toFixed(2):i.satisFiyat.toString(),musteriId:b,urunId:i.id.toString(),depoId:""})),await ne(i.id),i.stokMiktari!==void 0&&i.stokMiktari<=0?l("Uyarı: Bu ürün stokta yok!","warning"):i.kritikStok&&i.stokMiktari<=i.kritikStok&&l(`Uyarı: Stok kritik seviyede (${i.stokMiktari} adet)`,"warning")}else l("Ürün bulunamadı.","error")}catch(a){console.error("Barkod ile ürün getirme hatası:",a),l("Ürün yüklenemedi.","error")}},Ve=d.useCallback(Oe(s=>{qe(s)},800),[]),_e=async()=>{var s,a;if(!c.adi){l("Şube adı zorunludur.","error");return}if(!b||isNaN(parseInt(b))){l("Geçersiz müşteri ID'si.","error");return}p(!0);try{const i={adi:c.adi,adres:c.adres||"",kodu:c.kodu||"",aktif:c.aktif?1:0,musteriId:parseInt(b),kullaniciId:F.id},{data:r}=await I.post(`${g}/sube/sube-create`,i);l(r.message||"Şube başarıyla eklendi.","success"),await se(),_(!1),w({adi:"",adres:"",kodu:"",aktif:!0})}catch(i){console.error("Şube Ekleme Hatası:",i),l(((a=(s=i.response)==null?void 0:s.data)==null?void 0:a.message)||"Şube eklenemedi.","error")}finally{p(!1)}},Je=s=>{Ne(s),w({adi:s.adi,adres:s.adres,kodu:s.kodu,aktif:s.aktif===1}),J(!0)},Qe=async()=>{var s,a;if(!c.adi){l("Şube adı zorunludur.","error");return}p(!0);try{const i={id:Te.id,adi:c.adi,adres:c.adres||"",kodu:c.kodu||"",aktif:c.aktif?1:0,musteriId:parseInt(b),kullaniciId:F.id};await I.put(`${g}/sube/sube-update`,i),l("Şube güncellendi.","success"),J(!1),await se()}catch(i){l(((a=(s=i.response)==null?void 0:s.data)==null?void 0:a.message)||"Şube güncellenemedi.","error")}finally{p(!1)}},We=async s=>{var a,i;p(!0);try{await I.delete(`${g}/sube/sube-delete/${s}?kullaniciId=${F.id}`),l("Şube başarıyla silindi.","success"),await se()}catch(r){console.error("Şube Silme Hatası:",r),l(((i=(a=r.response)==null?void 0:a.data)==null?void 0:i.message)||"Şube silinemedi.","error")}finally{p(!1)}},Xe=()=>{if(!t.barkod||!t.urunAdi||!t.fiyat||!t.miktar||!t.depoId){l("Tüm alanlar (barkod, ürün adı, fiyat, miktar, depo) doldurulmalıdır.","error");return}if(isNaN(t.fiyat)||isNaN(t.miktar)||parseFloat(t.fiyat)<=0||parseFloat(t.miktar)<=0){l("Fiyat ve miktar pozitif sayılar olmalıdır.","error");return}if(B.some(a=>a.barkod===t.barkod&&a.depoId===t.depoId)){l("Bu ürün ve depo kombinasyonu zaten eklenmiş.","error");return}const s={id:Date.now(),barkod:t.barkod,urunAdi:t.urunAdi,fiyat:parseFloat(t.fiyat),birim:t.birim,miktar:parseFloat(t.miktar),toplamFiyat:parseFloat(t.fiyat)*parseFloat(t.miktar),musteriId:b,kullaniciId:F.id,depoId:parseInt(t.depoId),urunId:parseInt(t.urunId)};W(a=>[...a,s]),$({barkod:"",urunAdi:"",fiyat:"",birim:"adet",miktar:"",toplamFiyat:"",musteriId:b,urunId:"",depoId:""}),R(a=>({...a,[s.urunId]:a[s.urunId]})),l("Ürün sepete eklendi.","success"),setTimeout(()=>{var a;(a=document.querySelector('input[name="barkod"]'))==null||a.focus()},100)},Ze=s=>{W(a=>a.filter(i=>i.id!==s)),l("Ürün silindi.","success")},es=(s,a)=>{W(i=>i.map((r,o)=>o===s?{...r,depoId:parseInt(a)}:r))},ss=()=>B.reduce((s,a)=>s+a.toplamFiyat,0).toLocaleString("tr-TR"),as=async()=>{var s,a;if(B.length===0){l("En az bir ürün ekleyin.","error");return}if(B.some(i=>!i.depoId)){l("Tüm ürünler için bir depo seçilmelidir.","error");return}p(!0);try{const i=B.map(r=>({barkod:r.barkod,urunAdi:r.urunAdi,fiyat:r.fiyat,birim:r.birim,miktar:r.miktar,toplamFiyat:r.toplamFiyat,musteriId:parseInt(b),kullaniciId:F.id,depoId:r.depoId}));await I.post(`${g}/musteriSatis/musteriSatis-create`,i),l("Satış(lar) kaydedildi.","success"),Q(!1),W([]),R({}),E()}catch(i){l(((a=(s=i.response)==null?void 0:s.data)==null?void 0:a.message)||"Satış kaydedilemedi.","error")}finally{p(!1)}},is=s=>{var a,i;if(Pe(s),$({id:s.id,barkod:s.barkod,urunAdi:s.urunAdi,fiyat:s.fiyat.toString(),birim:s.birim,miktar:s.miktar.toString(),toplamFiyat:s.toplamFiyat.toString(),musteriId:b,urunId:((a=P.find(r=>r.barkod===s.barkod))==null?void 0:a.id.toString())||"",depoId:((i=s.depoId)==null?void 0:i.toString())||""}),s.barkod){const r=P.find(o=>o.barkod===s.barkod);r&&ne(r.id)}Z(!0)},C=s=>{const{name:a,value:i}=s.target;if($(r=>({...r,[a]:i})),a==="fiyat"||a==="miktar"){const r=a==="fiyat"?parseFloat(i)||0:parseFloat(t.fiyat)||0,o=a==="miktar"?parseFloat(i)||0:parseFloat(t.miktar)||0,v=(r*o).toFixed(2);$(S=>({...S,[a]:i,toplamFiyat:v}))}if(a==="barkod"&&Ve(i),a==="urunId"){const r=P.find(o=>o.id===parseInt(i));r&&($(o=>({...o,urunId:i,barkod:r.barkod,urunAdi:r.adi,fiyat:r.satisFiyat.toString(),birim:r.birimAdi||"adet",miktar:o.miktar||"1",toplamFiyat:o.miktar?(parseFloat(o.miktar)*r.satisFiyat).toFixed(2):r.satisFiyat.toString(),depoId:""})),ne(r.id))}},rs=async()=>{var s,a;if(!t.barkod||!t.urunAdi||!t.fiyat||!t.miktar||!t.depoId){l("Tüm alanlar (barkod, ürün adı, fiyat, miktar, depo) doldurulmalıdır.","error");return}p(!0);try{const i={id:parseInt(t.id),barkod:t.barkod,urunAdi:t.urunAdi,fiyat:parseFloat(t.fiyat),birim:t.birim,miktar:parseFloat(t.miktar),toplamFiyat:parseFloat(t.toplamFiyat),musteriId:parseInt(b),kullaniciId:F.id,depoId:parseInt(t.depoId)};await I.put(`${g}/musteriSatis/musteriSatis-update`,i),l("Satış güncellendi.","success"),Z(!1),R({}),E()}catch(i){l(((a=(s=i.response)==null?void 0:s.data)==null?void 0:a.message)||"Satış güncellenemedi.","error")}finally{p(!1)}},pe=d.useCallback(async s=>{var a,i;if(window.confirm(`${Array.isArray(s)?"Seçili satışları":"Bu satışı"} iptal etmek istediğinizden emin misiniz?`)){p(!0);try{const r=Array.isArray(s)?s:[s];await Promise.all(r.map(async o=>{await I.post(`${g}/musteriSatis/musteriSatis-iptal`,null,{params:{satisId:o,kullaniciId:F.id}})})),l(`${r.length} satış iptal edildi.`),le([]),E()}catch(r){console.error("Satış İptal Hatası:",r),l(((i=(a=r.response)==null?void 0:a.data)==null?void 0:i.Message)||"Satış iptal edilemedi.","error")}finally{p(!1)}}},[l,E]),ts=s=>{le(a=>a.includes(s)?a.filter(i=>i!==s):[...a,s])},ls=()=>{if(z.length===0){l("Lütfen en az bir satış seçin.","error");return}pe(z)},ns=async s=>{var a,i;if(window.confirm("Bu satış kaydını silmek istediğinizden emin misiniz?")){p(!0);try{await I.delete(`${g}/musteriSatis/musteriSatis-delete/${s}?kullaniciId=${F.id}`),l("Satış silindi.","success"),E()}catch(r){l(((i=(a=r.response)==null?void 0:a.data)==null?void 0:i.message)||"Satış silinemedi.","error")}finally{p(!1)}}},ds=async()=>{var s,a;X(!1),p(!0);try{await I.delete(`${g}/musteri/musteri-delete/${k.id}?kullaniciId=${F.id}`),l("Müşteri silindi.","success"),ue("/app/customers")}catch(i){console.error("Müşteri Silme Hatası:",i),l(((a=(s=i.response)==null?void 0:s.data)==null?void 0:a.message)||"Müşteri silinemedi.","error")}finally{p(!1)}},os=async()=>{var s,a;p(!0);try{await I.put(`${g}/musteri/musteri-aktif/${k.id}`),l("Müşteri aktif edildi.","success"),U()}catch(i){console.error("Müşteri Aktif Etme Hatası:",i),l(((a=(s=i.response)==null?void 0:s.data)==null?void 0:a.message)||"Müşteri aktif edilemedi.","error")}finally{p(!1)}};return d.useEffect(()=>{b&&(!k||k.id),U(),E(),se(),Ge()},[b,U]),A||!k?e.jsxs(D,{children:[e.jsx(M,{children:"Müşteri Bilgisi"}),e.jsxs(T,{children:[A?e.jsx("p",{children:"Yükleniyor..."}):e.jsx("p",{children:"Müşteri bulunamadı."}),e.jsx(m,{color:"primary",onClick:()=>ue("/app/customers"),children:"Geri Dön"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(xs,{placement:"top-end",className:"p-3",children:ze}),e.jsxs(x,{children:[e.jsx(n,{xs:12,children:e.jsxs(D,{children:[e.jsx(M,{style:{backgroundColor:"#2965A8",color:"#fff",fontSize:"24px"},children:e.jsxs(x,{className:"align-items-center",children:[e.jsx(n,{xs:2,children:e.jsx("img",{src:k.image?`https://speedsofttest.com/${k.image}`:"https://via.placeholder.com/100",alt:"Müşteri resmi",style:{width:"100px",height:"100px",objectFit:"cover"}})}),e.jsxs(n,{xs:8,children:[e.jsx("h3",{children:k.name.toUpperCase()}),e.jsxs("p",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Telefon:"})," ",k.phone]}),e.jsxs("p",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Telefon 2:"})," ",k.phone2||"Yok"]}),e.jsxs("p",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"E-Posta:"})," ",k.email]}),e.jsxs("p",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Adres:"})," ",k.address]}),e.jsxs("p",{style:{fontSize:"14px"},children:[e.jsx("strong",{children:"Vergi Dairesi/No:"})," ",k.taxOffice,"/",k.taxOrIdNumber]})]})]})}),e.jsx(T,{children:e.jsxs(x,{children:[e.jsx(n,{children:e.jsxs(D,{children:[e.jsx(M,{className:"bg-danger",style:{color:"white"},children:"Açık Bakiye"}),e.jsx(T,{children:e.jsxs("p",{className:"fw-bold",children:[(k.openBalance||0).toLocaleString("tr-TR")," ","TRY"]})})]})}),e.jsx(n,{children:e.jsxs(D,{children:[e.jsx(M,{className:"bg-warning",style:{color:"white"},children:"Çek Bakiyesi"}),e.jsx(T,{children:e.jsxs("p",{className:"fw-bold",children:[(k.chequeBalance||0).toLocaleString("tr-TR")," ","TRY"]})})]})}),e.jsx(n,{children:e.jsxs(D,{children:[e.jsx(M,{className:"bg-info",style:{color:"white"},children:"Senet Bakiyesi"}),e.jsx(T,{children:e.jsxs("p",{className:"fw-bold",children:[(k.bondBalance||0).toLocaleString("tr-TR")," ","TRY"]})})]})}),e.jsx(n,{children:e.jsxs(D,{children:[e.jsx(M,{className:"bg-success",style:{color:"white"},children:"Ciro"}),e.jsx(T,{children:e.jsxs("p",{className:"fw-bold",children:[(k.turnover||0).toLocaleString("tr-TR")," TRY"]})})]})})]})})]})}),e.jsx(n,{xs:12,className:"my-3 d-flex",children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(m,{color:"success",style:{color:"white"},onClick:()=>Q(!0),children:"Satış Yap"}),e.jsxs(m,{color:"warning",style:{color:"white"},onClick:ls,disabled:z.length===0,children:[e.jsx(Y,{icon:Fe})," Seçili Satışları İptal Et"]}),e.jsx(m,{color:"primary",style:{color:"white",backgroundColor:"#2965A8"},onClick:()=>_(!0),disabled:A,children:"Yeni Şube Ekle"}),e.jsxs(de,{children:[e.jsx(oe,{color:"info",style:{color:"white"},disabled:!0,children:"Ödeme/Tahsilat"}),e.jsxs(ce,{children:[e.jsx(y,{disabled:!0,children:"Nakit-Kredi Kartı-Banka"}),e.jsx(y,{disabled:!0,children:"Temazsız Kredi Kartı"}),e.jsx(y,{disabled:!0,children:"Çek"}),e.jsx(y,{disabled:!0,children:"Müşteriden Senet Al"}),e.jsx(y,{disabled:!0,children:"Müşteriye Senet Ver"}),e.jsx(y,{disabled:!0,children:"Bakiye Düzelt"}),e.jsx(y,{disabled:!0,children:"Borç-Alacak Fişleri"}),e.jsx(y,{disabled:!0,children:"Cari Virman"})]})]}),e.jsxs(de,{children:[e.jsx(oe,{color:"secondary",disabled:!0,children:"Hesap Ekstresi"}),e.jsxs(ce,{children:[e.jsx(y,{disabled:!0,children:"Ekstre Linki"}),e.jsx(y,{disabled:!0,children:"Ekstre"}),e.jsx(y,{disabled:!0,children:"Detaylı Ekstre"}),e.jsx(y,{disabled:!0,children:"Mutabakat Mektubu"})]})]}),e.jsx(m,{color:"primary",style:{color:"white"},onClick:()=>l("Döküman Yükle işlemi başlatıldı.","success"),disabled:!0,children:"Döküman Yükle"}),e.jsxs(de,{children:[e.jsx(oe,{color:"secondary",children:"Diğer İşlemler"}),e.jsxs(ce,{children:[e.jsx(y,{onClick:()=>te(!0),children:"Müşteri Bilgilerini Güncelle"}),e.jsx(y,{disabled:!0,children:"E-Posta Gönderi Durumu"}),e.jsx(y,{disabled:!0,children:"Alış Yap"}),e.jsx(y,{onClick:()=>X(!0),children:"Müşteriyi Sil"}),e.jsx(y,{onClick:os,children:"Müşteriyi Aktif Et"}),e.jsx(y,{disabled:!0,children:"Etiket Yazdır"})]})]})]})}),e.jsx(n,{xs:12,children:e.jsx(x,{children:[{title:"Önceki Satışlar",data:L,type:"sales"},{title:"Önceki Ödemeler",data:Ae,type:"payments"},{title:"Şubeler",data:me,type:"branches"}].map(s=>e.jsx(n,{className:"mt-3",children:e.jsxs(D,{children:[e.jsx(M,{style:{backgroundColor:"#2965A8",color:"white"},children:s.title}),e.jsx(T,{children:e.jsxs(ge,{responsive:!0,children:[e.jsx(Se,{children:e.jsx(H,{children:s.type==="branches"?e.jsxs(e.Fragment,{children:[e.jsx(u,{children:"Şube Adı"}),e.jsx(u,{children:"Adres"}),e.jsx(u,{children:"Kod"}),e.jsx(u,{children:"Aktif"}),e.jsx(u,{children:"İşlemler"})]}):s.type==="sales"?e.jsxs(e.Fragment,{children:[e.jsx(u,{children:e.jsx(f,{type:"checkbox",checked:z.length===L.length,onChange:()=>le(z.length===L.length?[]:L.map(a=>a.satisId))})}),e.jsx(u,{children:"Barkod"}),e.jsx(u,{children:"Ürün Adı"}),e.jsx(u,{children:"Fiyat"}),e.jsx(u,{children:"Birim"}),e.jsx(u,{children:"Miktar"}),e.jsx(u,{children:"Toplam Fiyat"}),e.jsx(u,{children:"Durumu"}),e.jsx(u,{children:"İşlemler"})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{children:"Tarih"}),e.jsx(u,{children:"No"}),e.jsx(u,{children:"Durum"}),e.jsx(u,{children:"Tutar"})]})})}),e.jsx(Ce,{children:s.type==="branches"?me.map(a=>e.jsxs(H,{children:[e.jsx(h,{children:a.adi||"Bilinmiyor"}),e.jsx(h,{children:a.adres||"Yok"}),e.jsx(h,{children:a.kodu||"Yok"}),e.jsx(h,{children:a.aktif?"Evet":"Hayır"}),e.jsx(h,{children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(m,{color:"info",size:"sm",onClick:()=>Je(a),style:{color:"white"},children:e.jsx(Y,{icon:Ie})}),e.jsx(m,{color:"danger",size:"sm",onClick:()=>We(a.id),style:{color:"white"},children:e.jsx(Y,{icon:we})})]})})]},a.id)):s.type==="sales"?L.map(a=>e.jsxs(H,{children:[e.jsx(h,{children:e.jsx(f,{type:"checkbox",checked:z.includes(a.satisId),onChange:()=>ts(a.satisId)})}),e.jsx(h,{children:a.barkod}),e.jsx(h,{children:a.urunAdi}),e.jsx(h,{children:a.fiyat}),e.jsx(h,{children:a.birim}),e.jsx(h,{children:a.miktar}),e.jsx(h,{children:a.toplamFiyat}),e.jsx(h,{children:a.durumu===1?"Aktif":"İptal"}),e.jsx(h,{children:e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(m,{color:"info",size:"sm",onClick:()=>is(a),style:{color:"white"},children:e.jsx(Y,{icon:Ie})}),e.jsx(m,{color:"danger",size:"sm",onClick:()=>ns(a.id),style:{color:"white"},children:e.jsx(Y,{icon:we})}),e.jsx(m,{color:"warning",size:"sm",onClick:()=>pe(a.satisId),style:{color:"white"},disabled:a.durumu===0,children:e.jsx(Y,{icon:Fe})})]})})]},a.id)):s.data.map((a,i)=>e.jsxs(H,{children:[e.jsx(h,{children:new Date().toLocaleDateString()}),e.jsx(h,{children:a.no||"Yok"}),e.jsx(h,{children:a.durum||"Bilinmiyor"}),e.jsxs(h,{children:[(a.tutar||0).toLocaleString("tr-TR")," TRY"]})]},i))})]})})]})},s.title))})})]}),e.jsx(ys,{visible:Ye,onClose:()=>te(!1),customer:k,onSave:()=>{U(),te(!1)}}),e.jsxs(K,{visible:De,onClose:()=>_(!1),children:[e.jsx(G,{children:e.jsx(O,{children:"Yeni Şube Ekle"})}),e.jsx(q,{children:e.jsxs(ae,{children:[e.jsx(x,{className:"mb-3",children:e.jsxs(n,{children:[e.jsx(j,{children:"Şube Adı"}),e.jsx(f,{value:c.adi,onChange:s=>w({...c,adi:s.target.value}),required:!0})]})}),e.jsx(x,{className:"mb-3",children:e.jsxs(n,{children:[e.jsx(j,{children:"Adres"}),e.jsx(f,{value:c.adres,onChange:s=>w({...c,adres:s.target.value})})]})}),e.jsx(x,{className:"mb-3",children:e.jsxs(n,{children:[e.jsx(j,{children:"Kod"}),e.jsx(f,{value:c.kodu,onChange:s=>w({...c,kodu:s.target.value})})]})}),e.jsx(x,{className:"mb-3",children:e.jsx(n,{children:e.jsx(ve,{label:"Aktif",checked:c.aktif,onChange:s=>w({...c,aktif:s.target.checked})})})})]})}),e.jsxs(V,{children:[e.jsx(m,{color:"secondary",onClick:()=>_(!1),children:"İptal"}),e.jsx(m,{color:"primary",onClick:_e,disabled:A||!c.adi,children:"Kaydet"})]})]}),e.jsxs(K,{visible:Me,onClose:()=>J(!1),children:[e.jsx(G,{children:e.jsx(O,{children:"Şube Güncelle"})}),e.jsx(q,{children:e.jsxs(ae,{children:[e.jsx(x,{className:"mb-3",children:e.jsxs(n,{children:[e.jsx(j,{children:"Şube Adı"}),e.jsx(f,{value:c.adi,onChange:s=>w({...c,adi:s.target.value}),required:!0})]})}),e.jsx(x,{className:"mb-3",children:e.jsxs(n,{children:[e.jsx(j,{children:"Adres"}),e.jsx(f,{value:c.adres,onChange:s=>w({...c,adres:s.target.value})})]})}),e.jsx(x,{className:"mb-3",children:e.jsxs(n,{children:[e.jsx(j,{children:"Kod"}),e.jsx(f,{value:c.kodu,onChange:s=>w({...c,kodu:s.target.value})})]})}),e.jsx(x,{className:"mb-3",children:e.jsx(n,{children:e.jsx(ve,{label:"Aktif",checked:c.aktif,onChange:s=>w({...c,aktif:s.target.checked})})})})]})}),e.jsxs(V,{children:[e.jsx(m,{color:"secondary",onClick:()=>J(!1),children:"İptal"}),e.jsx(m,{color:"primary",onClick:Qe,disabled:A||!c.adi,children:"Güncelle"})]})]}),e.jsxs(K,{visible:$e,onClose:()=>Q(!1),size:"xl",children:[e.jsx(G,{children:e.jsx(O,{children:"Satış Yap"})}),e.jsx(q,{children:e.jsxs(ae,{children:[e.jsxs(x,{className:"mb-3",children:[e.jsxs(n,{md:6,children:[e.jsx(j,{children:"Ürün Seç"}),e.jsxs(N,{name:"urunId",value:t.urunId,onChange:C,children:[e.jsx("option",{value:"",children:"Ürün Seçin"}),P.map(s=>e.jsxs("option",{value:s.id,children:[s.adi," (Barkod: ",s.barkod,", Fiyat: ",s.satisFiyat,")"]},s.id))]})]}),e.jsxs(n,{md:6,children:[e.jsx(j,{children:"Barkod"}),e.jsx(f,{name:"barkod",value:t.barkod,onChange:C})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(n,{md:6,children:[e.jsx(j,{children:"Ürün Adı"}),e.jsx(f,{name:"urunAdi",value:t.urunAdi,onChange:C})]}),e.jsxs(n,{md:6,children:[e.jsx(j,{children:"Depo"}),e.jsxs(N,{name:"depoId",value:t.depoId,onChange:C,children:[e.jsx("option",{value:"",children:"Depo Seçin"}),t.urunId&&((ye=re[t.urunId])==null?void 0:ye.map(s=>{var a;return e.jsxs("option",{value:s.depoId,children:[((a=s.depo)==null?void 0:a.adi)||"Bilinmeyen Depo"," (Stok: ",s.miktar,")"]},s.depoId)}))]})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(n,{md:4,children:[e.jsx(j,{children:"Fiyat"}),e.jsx(f,{name:"fiyat",type:"number",step:"0.01",value:t.fiyat,onChange:C})]}),e.jsxs(n,{md:4,children:[e.jsx(j,{children:"Birim"}),e.jsxs(N,{name:"birim",value:t.birim,onChange:C,children:[e.jsx("option",{value:"adet",children:"Adet"}),e.jsx("option",{value:"kg",children:"Kg"}),e.jsx("option",{value:"lt",children:"Lt"}),e.jsx("option",{value:"m",children:"Metre"})]})]}),e.jsxs(n,{md:4,children:[e.jsx(j,{children:"Miktar"}),e.jsx(f,{name:"miktar",type:"number",step:"0.01",value:t.miktar,onChange:C})]})]}),e.jsx(x,{className:"mb-3",children:e.jsxs(n,{children:[e.jsx(j,{children:"Toplam Fiyat"}),e.jsx(f,{value:t.toplamFiyat,readOnly:!0,disabled:!0})]})}),e.jsx(x,{className:"mb-3",children:e.jsx(n,{children:e.jsx(m,{color:"primary",onClick:Xe,children:"Ürün Ekle"})})}),e.jsxs(ge,{responsive:!0,children:[e.jsx(Se,{children:e.jsxs(H,{children:[e.jsx(u,{children:"Barkod"}),e.jsx(u,{children:"Ürün Adı"}),e.jsx(u,{children:"Fiyat"}),e.jsx(u,{children:"Birim"}),e.jsx(u,{children:"Depo"}),e.jsx(u,{children:"Miktar"}),e.jsx(u,{children:"Toplam Fiyat"}),e.jsx(u,{children:"İşlemler"})]})}),e.jsx(Ce,{children:B.map((s,a)=>{const i=s.urunId?re[s.urunId]||[]:[];return e.jsxs(H,{children:[e.jsx(h,{children:s.barkod}),e.jsx(h,{children:s.urunAdi}),e.jsx(h,{children:s.fiyat}),e.jsx(h,{children:s.birim}),e.jsx(h,{children:e.jsxs(N,{value:s.depoId,onChange:r=>es(a,r.target.value),children:[e.jsx("option",{value:"",children:"Depo Seçin"}),i.map(r=>{var o;return e.jsxs("option",{value:r.depoId,children:[((o=r.depo)==null?void 0:o.adi)||"Bilinmeyen Depo"," (Stok: ",r.miktar,")"]},r.depoId)})]})}),e.jsx(h,{children:s.miktar}),e.jsx(h,{children:s.toplamFiyat}),e.jsx(h,{children:e.jsx(m,{color:"danger",size:"sm",onClick:()=>Ze(s.id),children:"Sil"})})]},s.id)})})]}),e.jsx(x,{children:e.jsx(n,{children:e.jsxs("strong",{children:["Toplam: ",ss()," TRY"]})})})]})}),e.jsxs(V,{children:[e.jsx(m,{color:"secondary",onClick:()=>Q(!1),children:"İptal"}),e.jsx(m,{color:"primary",onClick:as,disabled:A||B.length===0||B.some(s=>!s.depoId),children:"Satışı Kaydet"})]})]}),e.jsxs(K,{visible:Re,onClose:()=>Z(!1),size:"xl",children:[e.jsx(G,{children:e.jsx(O,{children:"Satış Güncelle"})}),e.jsx(q,{children:e.jsxs(ae,{children:[e.jsxs(x,{className:"mb-3",children:[e.jsxs(n,{md:6,children:[e.jsx(j,{children:"Ürün Seç"}),e.jsxs(N,{name:"urunId",value:t.urunId,onChange:C,children:[e.jsx("option",{value:"",children:"Ürün Seçin"}),P.map(s=>e.jsxs("option",{value:s.id,children:[s.adi," (Barkod: ",s.barkod,", Fiyat: ",s.satisFiyat,")"]},s.id))]})]}),e.jsxs(n,{md:6,children:[e.jsx(j,{children:"Barkod"}),e.jsx(f,{name:"barkod",value:t.barkod,onChange:C})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(n,{md:6,children:[e.jsx(j,{children:"Ürün Adı"}),e.jsx(f,{name:"urunAdi",value:t.urunAdi,onChange:C})]}),e.jsxs(n,{md:6,children:[e.jsx(j,{children:"Depo"}),e.jsxs(N,{name:"depoId",value:t.depoId,onChange:C,children:[e.jsx("option",{value:"",children:"Depo Seçin"}),t.urunId&&((fe=re[t.urunId])==null?void 0:fe.map(s=>{var a;return e.jsxs("option",{value:s.depoId,children:[((a=s.depo)==null?void 0:a.adi)||"Bilinmeyen Depo"," (Stok: ",s.miktar,")"]},s.depoId)}))]})]})]}),e.jsxs(x,{className:"mb-3",children:[e.jsxs(n,{md:4,children:[e.jsx(j,{children:"Fiyat"}),e.jsx(f,{name:"fiyat",type:"number",step:"0.01",value:t.fiyat,onChange:C})]}),e.jsxs(n,{md:4,children:[e.jsx(j,{children:"Birim"}),e.jsxs(N,{name:"birim",value:t.birim,onChange:C,children:[e.jsx("option",{value:"adet",children:"Adet"}),e.jsx("option",{value:"kg",children:"Kg"}),e.jsx("option",{value:"lt",children:"Lt"}),e.jsx("option",{value:"m",children:"Metre"})]})]}),e.jsxs(n,{md:4,children:[e.jsx(j,{children:"Miktar"}),e.jsx(f,{name:"miktar",type:"number",step:"0.01",value:t.miktar,onChange:C})]})]}),e.jsx(x,{className:"mb-3",children:e.jsxs(n,{children:[e.jsx(j,{children:"Toplam Fiyat"}),e.jsx(f,{value:t.toplamFiyat,readOnly:!0,disabled:!0})]})})]})}),e.jsxs(V,{children:[e.jsx(m,{color:"secondary",onClick:()=>Z(!1),children:"İptal"}),e.jsx(m,{color:"primary",onClick:rs,disabled:A||!t.depoId,children:"Güncelle"})]})]}),e.jsxs(K,{visible:Le,onClose:()=>X(!1),children:[e.jsx(G,{children:e.jsx(O,{children:"Müşteriyi Sil"})}),e.jsx(q,{children:e.jsxs("p",{children:[k.name," adlı müşteriyi silmek istediğinizden emin misiniz?"]})}),e.jsxs(V,{children:[e.jsx(m,{color:"secondary",onClick:()=>X(!1),children:"İptal"}),e.jsx(m,{color:"danger",onClick:ds,disabled:A,children:"Sil"})]})]})]})};export{zs as default};
