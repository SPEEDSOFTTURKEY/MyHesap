import{r as F,Z as v,j as a,g as N,s as R,h as z,e as Y,f as s,U as n,V as x,an as g,o as i,aA as M}from"./index-DvA_wB1j.js";import{R as w}from"./ReportForm-CvGTcY4w.js";import{D as b}from"./DatePickerField-BLTU0Ozl.js";const K={Ç:"C",ç:"c",Ğ:"G",ğ:"g",İ:"I",ı:"i",Ö:"O",ö:"o",Ş:"S",ş:"s",Ü:"U",ü:"u"},e=t=>t&&t.replace(/[ÇçĞğİıÖöŞşÜü]/g,c=>K[c]||c),W=t=>{try{t.setFont("times","normal"),console.log("Times fontu kullanılıyor (Türkçe karakter desteği ile)")}catch(c){console.error("Font ayarlama hatası:",c),t.setFont("helvetica","normal")}},O=()=>{const[t,c]=F.useState({searchType:"",dateRangeStart:v(),dateRangeEnd:v(),documentStatus:[],reportType:"",documentType:"",columns:[],documentNumber:"",class1:"",class2:"",customerType:"",customer:"",productService:"",category:"",brand:"",warehouse:""}),r=l=>{const{name:d,value:m,type:S,checked:u}=l.target;c(S==="checkbox"?h=>({...h,[d]:u?[...h[d],m]:h[d].filter(j=>j!==m)}):h=>({...h,[d]:m}))},y=(l,d)=>{c(m=>({...m,[l]:d}))},f=()=>{const l=new M;W(l),l.setFontSize(18);const d=e("Stok-Satış Karşılama Raporu");l.text(d,105,15,{align:"center"});const m=v().format("DD/MM/YYYY HH:mm:ss");l.setFontSize(10),l.text(e(`Oluşturulma Tarihi: ${m}`),105,25,{align:"center"}),l.setFontSize(14),l.text(e("Rapor Kriterleri"),14,35);const S=[[e("Arama"),e(t.searchType||"Seçiniz")],[e("Başlangıç Tarihi"),t.dateRangeStart.format("DD/MM/YYYY")],[e("Bitiş Tarihi"),t.dateRangeEnd.format("DD/MM/YYYY")],[e("Belge Durumu"),t.documentStatus.length?e(t.documentStatus.join(", ")):e("Hepsini Seç")],[e("Rapor Türü"),e(t.reportType||"Belirtilmedi")],[e("Belge Tipi"),e(t.documentType||"Seçiniz")],[e("Kolonlar"),t.columns.length?e(t.columns.join(", ")):e("Belirtilmedi")],[e("Belge Numarası"),e(t.documentNumber||"Belirtilmedi")],[e("Sınıf 1"),e(t.class1||"Belirtilmedi")],[e("Sınıf 2"),e(t.class2||"Belirtilmedi")],[e("Müşteri Tipi"),e(t.customerType||"Seçiniz")],[e("Müşteri"),e(t.customer||"Belirtilmedi")],[e("Ürün/Hizmet"),e(t.productService||"Belirtilmedi")],[e("Kategori"),e(t.category||"Belirtilmedi")],[e("Marka"),e(t.brand||"Belirtilmedi")],[e("Depo"),e(t.warehouse||"Seçiniz")]];l.autoTable({startY:40,head:[[e("Kriter"),e("Değer")]],body:S,theme:"grid",headStyles:{fillColor:[41,101,168],fontStyle:"bold",textColor:[255,255,255]},styles:{font:"times",fontStyle:"normal",cellPadding:3,fontSize:10,overflow:"linebreak"},columnStyles:{0:{cellWidth:50,fontStyle:"bold"},1:{cellWidth:100}}});const u=[{id:1,product:e("Ürün 1"),stock:50,sales:20,coverage:"2.5 ay"},{id:2,product:e("Ürün 2"),stock:30,sales:15,coverage:"2 ay"},{id:3,product:e("Ürün 3"),stock:100,sales:40,coverage:"2.5 ay"}];l.setFontSize(14),l.text(e("Stok-Satış Verileri"),14,l.autoTable.previous.finalY+15),l.autoTable({startY:l.autoTable.previous.finalY+20,head:[[e("ID"),e("Ürün"),e("Stok Miktarı"),e("Satış Miktarı"),e("Karşılama Süresi")]],body:u.map(o=>[o.id,o.product,o.stock,o.sales,o.coverage]),theme:"grid",headStyles:{fillColor:[41,101,168],fontStyle:"bold",textColor:[255,255,255]},styles:{font:"times",fontStyle:"normal",cellPadding:3,fontSize:10,overflow:"linebreak"},columnStyles:{0:{cellWidth:15},1:{cellWidth:50},2:{cellWidth:30},3:{cellWidth:30},4:{cellWidth:40}}}),l.setFontSize(14),l.text(e("Özet"),14,l.autoTable.previous.finalY+15);const h=u.reduce((o,p)=>o+p.stock,0),j=u.reduce((o,p)=>o+p.sales,0),T=u.reduce((o,p)=>o+parseFloat(p.coverage.split(" ")[0]),0)/u.length,k=[[e("Toplam Stok Miktarı"),h.toString()],[e("Toplam Satış Miktarı"),j.toString()],[e("Ortalama Karşılama Süresi"),`${T.toFixed(1)} ay`]];l.autoTable({startY:l.autoTable.previous.finalY+20,body:k,theme:"grid",headStyles:{fillColor:[41,101,168],fontStyle:"bold",textColor:[255,255,255]},styles:{font:"times",fontStyle:"normal",cellPadding:3,fontSize:10,overflow:"linebreak"},columnStyles:{0:{cellWidth:50,fontStyle:"bold"},1:{cellWidth:50}}});const D=l.output("blob"),B=URL.createObjectURL(D);window.open(B,"_blank")},C=l=>{l&&typeof l.preventDefault=="function"&&l.preventDefault(),f()};return a.jsxs(N,{children:[a.jsx(R,{style:{backgroundColor:"#2965A8",color:"#fff"},children:e("Stok-Satış Karşılama")}),a.jsx(z,{children:a.jsx(w,{onSubmit:C,children:a.jsxs(Y,{children:[a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Arama")}),a.jsxs(x,{name:"searchType",value:t.searchType,onChange:r,className:"mb-3",children:[a.jsx("option",{value:"",children:e("Seçiniz")}),a.jsx("option",{value:"document",children:e("Belge Tarihine Göre")}),a.jsx("option",{value:"stock",children:e("Stok Hareketine Göre")})]})]}),a.jsxs(s,{md:6,className:"d-flex gap-5 align-items-center",children:[a.jsx(b,{label:e("Başlangıç Tarihi"),value:t.dateRangeStart,onChange:l=>y("dateRangeStart",l)}),a.jsx(b,{label:e("Bitiş Tarihi"),value:t.dateRangeEnd,onChange:l=>y("dateRangeEnd",l)})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Belge Durumu")}),a.jsxs("div",{className:"mb-3",children:[a.jsx(g,{label:e("Hepsini Seç"),name:"documentStatus",value:"all",onChange:r}),a.jsx(g,{label:e("Faturalar"),name:"documentStatus",value:"invoices",onChange:r}),a.jsx(g,{label:e("Açık İrsaliyeler"),name:"documentStatus",value:"openDeliveries",onChange:r}),a.jsx(g,{label:e("Faturalaşmış İrsaliyeler"),name:"documentStatus",value:"invoicedDeliveries",onChange:r})]})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Rapor Türü")}),a.jsx(i,{name:"reportType",value:t.reportType,onChange:r,className:"mb-3"})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Belge Tipi")}),a.jsxs(x,{name:"documentType",value:t.documentType,onChange:r,className:"mb-3",children:[a.jsx("option",{value:"",children:e("Seçiniz")}),a.jsx("option",{value:"invoice",children:e("Fatura")}),a.jsx("option",{value:"stock",children:e("Stok Belgesi")})]})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Kolonlar")}),a.jsx(i,{name:"columns",value:t.columns,onChange:r,className:"mb-3"})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Belge Numarası")}),a.jsx(i,{name:"documentNumber",value:t.documentNumber,onChange:r,className:"mb-3"})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Sınıf 1")}),a.jsx(i,{name:"class1",value:t.class1,onChange:r,className:"mb-3"})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Sınıf 2")}),a.jsx(i,{name:"class2",value:t.class2,onChange:r,className:"mb-3"})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Müşteri Tipi")}),a.jsxs(x,{name:"customerType",value:t.customerType,onChange:r,className:"mb-3",children:[a.jsx("option",{value:"",children:e("Seçiniz")}),a.jsx("option",{value:"individual",children:e("Bireysel")}),a.jsx("option",{value:"corporate",children:e("Kurumsal")})]})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Müşteri")}),a.jsx(i,{name:"customer",value:t.customer,onChange:r,className:"mb-3"})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Ürün / Hizmet")}),a.jsx(i,{name:"productService",value:t.productService,onChange:r,className:"mb-3"})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Kategori")}),a.jsx(i,{name:"category",value:t.category,onChange:r,className:"mb-3"})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Marka")}),a.jsx(i,{name:"brand",value:t.brand,onChange:r,className:"mb-3"})]}),a.jsxs(s,{md:6,children:[a.jsx(n,{children:e("Depo")}),a.jsxs(x,{name:"warehouse",value:t.warehouse,onChange:r,className:"mb-3",children:[a.jsx("option",{value:"",children:e("Seçiniz")}),a.jsx("option",{value:"warehouse1",children:e("Depo 1")}),a.jsx("option",{value:"warehouse2",children:e("Depo 2")})]})]})]})})})]})};export{O as default};
