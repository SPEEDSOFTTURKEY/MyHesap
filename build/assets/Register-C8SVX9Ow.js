import{r as t,u as I,j as e,C as L,a as R,b as F,c as O,d as D,e as H,f as q,g as U,h as _,i as J,k as o,l as n,m as l,n as x,o as i,p as S,q as M}from"./index-DvA_wB1j.js";import{c as Q,a as V}from"./cil-phone-DE2e6Wm2.js";const W="https://speedsofttest.com/api",Z=()=>{const[p,v]=t.useState(""),[j,w]=t.useState(""),[g,T]=t.useState(""),[m,A]=t.useState(""),[h,$]=t.useState(""),[C,k]=t.useState(""),[f,E]=t.useState(""),[y,d]=t.useState(""),[b,N]=t.useState(""),P=I(),[u,c]=t.useState(null),B=t.useRef(),K=s=>{if(!s)return s;const a=s.replace(/[^\d]/g,""),r=a.length;return r<4?a:r<7?`(${a.slice(0,3)}) ${a.slice(3)}`:`(${a.slice(0,3)}) ${a.slice(3,6)} ${a.slice(6,10)}`},z=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(s).toLowerCase()),G=async()=>{if(d(""),N(""),h!==f){d("Şifreler eşleşmiyor!"),c({message:"Şifreler eşleşmiyor!",color:"danger"});return}if(!z(m)){d("Geçerli bir e-posta adresi giriniz!"),c({message:"Geçerli bir e-posta adresi giriniz!",color:"danger"});return}new Date().toISOString();const s={kullaniciAdi:g,adiSoyadi:p,telefon:C,sifre:h,email:m,firma:{adi:j}};try{const a=await fetch(`${W}/register/register-create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!a.ok){const r=await a.text();throw console.error("Sunucu Hatası:",r),new Error(`Kayıt başarısız. Sunucu yanıtı: ${a.status} ${a.statusText}. Detay: ${r}`)}N("Kayıt başarılı! Giriş sayfasına yönlendiriliyorsunuz..."),c({message:"Kayıt başarılı! Giriş sayfasına yönlendiriliyorsunuz...",color:"success"}),setTimeout(()=>P("/app/login"),2e3)}catch(a){const r=a.message||"Bir hata oluştu. Lütfen tekrar deneyin.";console.error("Kayıt hatası:",a),d(r),c({message:r,color:"danger"})}};return e.jsxs(e.Fragment,{children:[e.jsx(L,{ref:B,placement:"top-end",className:"p-3",children:u&&e.jsxs(R,{autohide:5e3,visible:!!u,color:u.color,className:"text-white shadow-lg",onClose:()=>c(null),children:[e.jsx(F,{closeButton:{label:"Kapat"},children:e.jsx("strong",{className:"me-auto",children:"Bildirim"})}),e.jsx(O,{children:u.message})]})}),e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(D,{children:e.jsx(H,{className:"justify-content-center",children:e.jsx(q,{md:9,lg:7,xl:6,children:e.jsx(U,{className:"mx-4",children:e.jsx(_,{className:"p-4",children:e.jsxs(J,{onSubmit:s=>s.preventDefault(),children:[e.jsx("h1",{children:"Kayıt Ol"}),e.jsx("p",{className:"text-body-secondary",children:"Hesabınızı oluşturun"}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(l,{icon:x})}),e.jsx(i,{placeholder:"Ad Soyad",autoComplete:"name",value:p,onChange:s=>v(s.target.value)})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(l,{icon:x})}),e.jsx(i,{placeholder:"Firma Adı",autoComplete:"organization",value:j,onChange:s=>w(s.target.value)})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(l,{icon:x})}),e.jsx(i,{placeholder:"Kullanıcı Adı",autoComplete:"username",value:g,onChange:s=>T(s.target.value)})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(l,{icon:Q})}),e.jsx(i,{type:"text",placeholder:"Telefon Numarası",autoComplete:"tel",value:C,onChange:s=>{const a=K(s.target.value);k(a)}})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(l,{icon:V})}),e.jsx(i,{placeholder:"Email",autoComplete:"email",value:m,onChange:s=>A(s.target.value)})]}),e.jsxs(o,{className:"mb-3",children:[e.jsx(n,{children:e.jsx(l,{icon:S})}),e.jsx(i,{type:"password",placeholder:"Şifre",autoComplete:"new-password",value:h,onChange:s=>$(s.target.value)})]}),e.jsxs(o,{className:"mb-4",children:[e.jsx(n,{children:e.jsx(l,{icon:S})}),e.jsx(i,{type:"password",placeholder:"Şifre tekrar!",autoComplete:"new-password",value:f,onChange:s=>E(s.target.value)})]}),y&&e.jsx("p",{className:"text-danger",children:y}),b&&e.jsx("p",{className:"text-success",children:b}),e.jsx("div",{className:"d-grid",children:e.jsx(M,{color:"light",className:"text-black",onClick:G,children:"Hesap Oluştur"})})]})})})})})})})]})};export{Z as default};
